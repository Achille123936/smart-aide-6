<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercices - EduBot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #7209b7;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --correct-color: #4ade80;
            --incorrect-color: #f87171;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 95%;
            max-width: 1200px;
            background-color: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .nav-tab {
            padding: 8px 16px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .nav-tab:hover, .nav-tab.active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            transition: var(--transition);
        }
        
        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }
        
        .back-button i {
            margin-right: 8px;
        }
        
        .exercises-content {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .exercises-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
        }
        
        .exercises-title h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .exercises-title p {
            color: #6c757d;
            font-size: 1.1rem;
        }
        
        .exercises-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .exercise-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
        }
        
        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .exercise-title {
            font-size: 1.2rem;
            color: var(--dark-color);
        }
        
        .exercise-difficulty {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .difficulty-easy {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .difficulty-medium {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .difficulty-hard {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .exercise-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .exercise-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .exercise-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .exercise-progress {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0%, #e9ecef 0%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-text-small {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .exercise-btn {
            padding: 8px 16px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .exercise-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Interface d'exercice */
        .exercise-interface {
            display: none;
        }
        
        .exercise-header-interface {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .exercise-progress-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-text {
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .exercise-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .exercise-score {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .exercise-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .exercise-instructions {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: var(--dark-color);
            line-height: 1.5;
        }
        
        .exercise-question {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-color);
            line-height: 1.5;
        }
        
        .exercise-image {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 3rem;
        }
        
        .exercise-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .exercise-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .option {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            background-color: #f8f9ff;
        }
        
        .option.selected {
            border-color: var(--primary-color);
            background-color: #e6f2ff;
        }
        
        .option.correct {
            border-color: var(--correct-color);
            background-color: #f0fdf4;
        }
        
        .option.incorrect {
            border-color: var(--incorrect-color);
            background-color: #fef2f2;
        }
        
        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option.selected .option-letter {
            background: var(--primary-color);
            color: white;
        }
        
        .option.correct .option-letter {
            background: var(--correct-color);
            color: white;
        }
        
        .option.incorrect .option-letter {
            background: var(--incorrect-color);
            color: white;
        }
        
        .exercise-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .exercise-btn-large {
            padding: 12px 25px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .exercise-btn-large:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .exercise-btn-large:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Résultats des exercices */
        .exercise-results {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .result-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: white;
        }
        
        .excellent {
            background: linear-gradient(45deg, var(--correct-color), #16a34a);
        }
        
        .good {
            background: linear-gradient(45deg, #4cc9f0, #3b82f6);
        }
        
        .average {
            background: linear-gradient(45deg, #f59e0b, #f97316);
        }
        
        .poor {
            background: linear-gradient(45deg, var(--incorrect-color), #dc2626);
        }
        
        .result-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .result-score {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .result-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Filtres */
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            color: #6c757d;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .filter-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .filter-btn:hover {
            background: #e9ecef;
        }
        
        .filter-btn.active:hover {
            background: var(--secondary-color);
        }
        
        /* Interface d'administration */
        .admin-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
        }
        
        .admin-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .admin-btn:hover {
            opacity: 0.9;
        }
        
        .admin-btn.delete {
            background: var(--incorrect-color);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .admin-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .admin-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 4px 8px;
            background: none;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .edit-btn {
            color: var(--primary-color);
        }
        
        .delete-btn {
            color: var(--incorrect-color);
        }
        
        .action-btn:hover {
            background-color: #f0f0f0;
        }
        
        /* Formulaire d'administration */
        .admin-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .option-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .option-input {
            flex: 1;
        }
        
        .correct-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Connexion administrateur */
        .login-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--dark-color);
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .login-btn {
            padding: 12px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            opacity: 0.9;
        }
        
        .admin-actions-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .logout-btn {
            padding: 8px 16px;
            background: var(--incorrect-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .logout-btn:hover {
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .exercises-container {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            .back-button {
                align-self: center;
            }
            .exercise-header-interface {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .exercise-controls {
                flex-direction: column;
                gap: 15px;
            }
            .result-stats {
                grid-template-columns: 1fr;
            }
            .result-actions {
                flex-direction: column;
            }
            .filters {
                justify-content: center;
            }
            .admin-table {
                display: block;
                overflow-x: auto;
            }
            .admin-actions-container {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div>
                <h1><i class="fas fa-brain"></i> EduBot</h1>
                <div class="nav-tabs">
                    <a href="quiz.html" class="nav-tab">
                        <i class="fas fa-question-circle"></i> Quiz
                    </a>
                    <a href="#" class="nav-tab active">
                        <i class="fas fa-pen-fancy"></i> Exercices
                    </a>
                    <a href="#" class="nav-tab" id="admin-tab-btn">
                        <i class="fas fa-cog"></i> Administration
                    </a>
                </div>
            </div>
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Retour à l'Accueil
            </a>
        </div>

        <div class="exercises-content">
            <!-- Section de sélection des exercices -->
            <div class="tab-content active" id="exercises-tab">
                <div class="exercises-title">
                    <h1>Exercices Pratiques</h1>
                    <p>Renforcez vos connaissances avec ces exercices interactifs</p>
                </div>

                <div class="filters">
                    <button class="filter-btn active" data-filter="all">Tous</button>
                    <button class="filter-btn" data-filter="math">Mathématiques</button>
                    <button class="filter-btn" data-filter="french">Français</button>
                    <button class="filter-btn" data-filter="science">Sciences</button>
                    <button class="filter-btn" data-filter="history">Histoire</button>
                    <button class="filter-btn" data-filter="easy">Facile</button>
                    <button class="filter-btn" data-filter="medium">Moyen</button>
                    <button class="filter-btn" data-filter="hard">Difficile</button>
                </div>

                <div class="exercises-container" id="exercises-container">
                    <!-- Les exercices seront chargés dynamiquement -->
                </div>
            </div>

            <!-- Interface d'exercice -->
            <div class="tab-content" id="exercise-interface">
                <div class="exercise-header-interface">
                    <div class="exercise-progress-info">
                        <span class="progress-text">Exercice <span id="current-exercise">1</span>/<span id="total-exercises">10</span></span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                    <div class="exercise-timer" id="exercise-timer">
                        <i class="fas fa-clock"></i>
                        <span id="time-left">10:00</span>
                    </div>
                    <div class="exercise-score">
                        <i class="fas fa-star"></i>
                        <span>Score: <span id="current-score">0</span></span>
                    </div>
                </div>

                <div class="exercise-content">
                    <p class="exercise-instructions" id="exercise-instructions">Répondez à la question suivante :</p>
                    <h2 class="exercise-question" id="exercise-question">Quelle est la capitale de la France ?</h2>
                    <div class="exercise-image" id="exercise-image">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    
                    <!-- Pour les questions à choix multiples -->
                    <div class="options-container" id="options-container">
                        <div class="option" data-option="1">
                            <div class="option-letter">A</div>
                            <div class="option-text">Londres</div>
                        </div>
                        <div class="option" data-option="2">
                            <div class="option-letter">B</div>
                            <div class="option-text">Berlin</div>
                        </div>
                        <div class="option" data-option="3">
                            <div class="option-letter">C</div>
                            <div class="option-text">Paris</div>
                        </div>
                        <div class="option" data-option="4">
                            <div class="option-letter">D</div>
                            <div class="option-text">Madrid</div>
                        </div>
                    </div>
                    
                    <!-- Pour les questions à réponse ouverte -->
                    <div id="open-answer-container" style="display: none;">
                        <input type="text" class="exercise-input" id="open-answer" placeholder="Entrez votre réponse ici...">
                        <button class="exercise-btn-large" id="check-answer-btn">
                            <i class="fas fa-check"></i> Vérifier la réponse
                        </button>
                    </div>
                    
                    <!-- Pour les exercices de correspondance -->
                    <div id="matching-container" style="display: none;">
                        <div class="matching-pairs" id="matching-pairs">
                            <!-- Les paires seront générées dynamiquement -->
                        </div>
                        <button class="exercise-btn-large" id="check-matching-btn">
                            <i class="fas fa-check"></i> Vérifier les correspondances
                        </button>
                    </div>
                </div>

                <div class="exercise-controls">
                    <button class="exercise-btn-large" id="prev-exercise-btn" disabled>
                        <i class="fas fa-arrow-left"></i> Précédent
                    </button>
                    <button class="exercise-btn-large" id="next-exercise-btn">
                        Suivant <i class="fas fa-arrow-right"></i>
                    </button>
                    <button class="exercise-btn-large" id="submit-exercise-btn" style="display: none;">
                        <i class="fas fa-paper-plane"></i> Soumettre
                    </button>
                </div>
            </div>

            <!-- Résultats des exercices -->
            <div class="tab-content" id="exercise-results">
                <div class="result-icon excellent">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="result-title">Félicitations !</h2>
                <div class="result-score">85%</div>
                <p>Vous avez excellé dans cet exercice ! Continuez comme ça.</p>

                <div class="result-stats">
                    <div class="result-stat">
                        <div class="stat-value">8/10</div>
                        <div class="stat-label">Réponses correctes</div>
                    </div>
                    <div class="result-stat">
                        <div class="stat-value">06:45</div>
                        <div class="stat-label">Temps passé</div>
                    </div>
                    <div class="result-stat">
                        <div class="stat-value">85%</div>
                        <div class="stat-label">Score final</div>
                    </div>
                </div>

                <div class="result-actions">
                    <button class="exercise-btn-large" id="restart-exercise-btn">
                        <i class="fas fa-redo"></i> Recommencer
                    </button>
                    <button class="exercise-btn-large" id="new-exercise-btn">
                        <i class="fas fa-list"></i> Nouvel Exercice
                    </button>
                    <a href="index.html" class="exercise-btn-large">
                        <i class="fas fa-home"></i> Accueil
                    </a>
                </div>
            </div>

            <!-- Interface d'administration -->
            <div class="tab-content" id="admin-tab">
                <div class="admin-container" id="admin-login-container">
                    <div class="login-title">
                        <h2>Connexion Administrateur</h2>
                        <p>Veuillez vous connecter pour accéder au panneau d'administration</p>
                    </div>
                    <div class="login-form">
                        <div class="form-group">
                            <label class="form-label" for="admin-username">Nom d'utilisateur</label>
                            <input type="text" class="form-input" id="admin-username" placeholder="Entrez votre nom d'utilisateur">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="admin-password">Mot de passe</label>
                            <input type="password" class="form-input" id="admin-password" placeholder="Entrez votre mot de passe">
                        </div>
                        <button class="login-btn" id="admin-login-btn">
                            <i class="fas fa-sign-in-alt"></i> Se connecter
                        </button>
                    </div>
                </div>

                <div class="admin-container" id="admin-panel" style="display: none;">
                    <div class="admin-actions-container">
                        <div>
                            <h2>Gestion des Exercices</h2>
                            <p>Bienvenue, <span id="admin-name">Administrateur</span></p>
                        </div>
                        <button class="logout-btn" id="admin-logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Déconnexion
                        </button>
                    </div>

                    <div class="admin-actions">
                        <button class="admin-btn" id="add-exercise-btn">
                            <i class="fas fa-plus"></i> Ajouter un Exercice
                        </button>
                        <button class="admin-btn" id="refresh-exercises-btn">
                            <i class="fas fa-sync-alt"></i> Actualiser
                        </button>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Catégorie</th>
                                <th>Titre</th>
                                <th>Type</th>
                                <th>Difficulté</th>
                                <th>Questions</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="exercises-table-body">
                            <!-- Les exercices seront chargés dynamiquement -->
                        </tbody>
                    </table>

                    <div class="admin-form" id="exercise-form">
                        <h3 id="form-title">Ajouter un Exercice</h3>
                        <div class="form-group">
                            <label class="form-label" for="exercise-category">Catégorie</label>
                            <select class="form-select" id="exercise-category">
                                <option value="math">Mathématiques</option>
                                <option value="french">Français</option>
                                <option value="science">Sciences</option>
                                <option value="history">Histoire</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exercise-title">Titre de l'exercice</label>
                            <input type="text" class="form-input" id="exercise-title" placeholder="Entrez le titre de l'exercice">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exercise-description">Description</label>
                            <textarea class="form-textarea" id="exercise-description" placeholder="Entrez la description de l'exercice"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exercise-difficulty">Difficulté</label>
                            <select class="form-select" id="exercise-difficulty">
                                <option value="easy">Facile</option>
                                <option value="medium">Moyen</option>
                                <option value="hard">Difficile</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exercise-type">Type d'exercice</label>
                            <select class="form-select" id="exercise-type">
                                <option value="multiple-choice">Choix multiples</option>
                                <option value="open-answer">Réponse ouverte</option>
                                <option value="matching">Correspondance</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exercise-duration">Durée (en minutes)</label>
                            <input type="number" class="form-input" id="exercise-duration" min="1" max="60" value="10">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Questions</label>
                            <div id="questions-container">
                                <!-- Les questions seront ajoutées dynamiquement -->
                            </div>
                            <button type="button" class="admin-btn" id="add-question-btn">
                                <i class="fas fa-plus"></i> Ajouter une Question
                            </button>
                        </div>
                        <div class="form-actions">
                            <button class="admin-btn" id="cancel-exercise-btn">Annuler</button>
                            <button class="admin-btn" id="save-exercise-btn">Enregistrer</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Éléments DOM
            const navTabs = document.querySelectorAll('.nav-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const exercisesContainer = document.getElementById('exercises-container');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const adminTabBtn = document.getElementById('admin-tab-btn');
            const adminLoginContainer = document.getElementById('admin-login-container');
            const adminPanel = document.getElementById('admin-panel');
            const adminLoginBtn = document.getElementById('admin-login-btn');
            const adminLogoutBtn = document.getElementById('admin-logout-btn');
            const adminName = document.getElementById('admin-name');
            const exercisesTableBody = document.getElementById('exercises-table-body');
            const exerciseForm = document.getElementById('exercise-form');
            const addExerciseBtn = document.getElementById('add-exercise-btn');
            const cancelExerciseBtn = document.getElementById('cancel-exercise-btn');
            const saveExerciseBtn = document.getElementById('save-exercise-btn');
            const addQuestionBtn = document.getElementById('add-question-btn');
            const questionsContainer = document.getElementById('questions-container');
            const refreshExercisesBtn = document.getElementById('refresh-exercises-btn');

            // Éléments de l'interface d'exercice
            const currentExerciseEl = document.getElementById('current-exercise');
            const totalExercisesEl = document.getElementById('total-exercises');
            const progressFill = document.getElementById('progress-fill');
            const timeLeftEl = document.getElementById('time-left');
            const currentScoreEl = document.getElementById('current-score');
            const exerciseInstructions = document.getElementById('exercise-instructions');
            const exerciseQuestion = document.getElementById('exercise-question');
            const exerciseImage = document.getElementById('exercise-image');
            const optionsContainer = document.getElementById('options-container');
            const openAnswerContainer = document.getElementById('open-answer-container');
            const openAnswerInput = document.getElementById('open-answer');
            const checkAnswerBtn = document.getElementById('check-answer-btn');
            const matchingContainer = document.getElementById('matching-container');
            const matchingPairs = document.getElementById('matching-pairs');
            const checkMatchingBtn = document.getElementById('check-matching-btn');
            const prevExerciseBtn = document.getElementById('prev-exercise-btn');
            const nextExerciseBtn = document.getElementById('next-exercise-btn');
            const submitExerciseBtn = document.getElementById('submit-exercise-btn');
            const restartExerciseBtn = document.getElementById('restart-exercise-btn');
            const newExerciseBtn = document.getElementById('new-exercise-btn');

            // Variables des exercices
            let currentExercise = null;
            let currentExerciseIndex = 0;
            let userScore = 0;
            let timerInterval = null;
            let timeLeft = 600; // 10 minutes en secondes
            let userAnswers = [];
            let currentFilter = 'all';
            let isAdminLoggedIn = false;
            let isEditingExercise = false;
            let editingExerciseId = null;

            // Données des exercices (stockées dans localStorage)
            let exercisesData = JSON.parse(localStorage.getItem('exercisesData')) || [
                {
                    id: 1,
                    title: "Addition et Soustraction",
                    category: "math",
                    difficulty: "easy",
                    description: "Pratiquez les opérations mathématiques de base avec ces exercices d'addition et de soustraction.",
                    type: "multiple-choice",
                    questions: 3,
                    duration: 10,
                    progress: 65,
                    questionsList: [
                        {
                            question: "Quel est le résultat de 15 + 27 ?",
                            options: ["32", "42", "37", "52"],
                            correctAnswer: 2,
                            explanation: "15 + 27 = 42"
                        },
                        {
                            question: "Si vous avez 58 et que vous soustrayez 23, que reste-t-il ?",
                            options: ["25", "35", "45", "55"],
                            correctAnswer: 2,
                            explanation: "58 - 23 = 35"
                        },
                        {
                            question: "Quel est le résultat de 134 - 67 ?",
                            options: ["57", "67", "77", "87"],
                            correctAnswer: 2,
                            explanation: "134 - 67 = 67"
                        }
                    ]
                },
                {
                    id: 2,
                    title: "Grammaire Française",
                    category: "french",
                    difficulty: "medium",
                    description: "Améliorez votre grammaire française avec ces exercices sur les accords et la conjugaison.",
                    type: "open-answer",
                    questions: 2,
                    duration: 15,
                    progress: 40,
                    questionsList: [
                        {
                            question: "Conjuguez le verbe 'aller' à la première personne du pluriel au présent.",
                            correctAnswer: "allons",
                            explanation: "La conjugaison correcte est 'nous allons'."
                        },
                        {
                            question: "Accordez l'adjectif 'beau' avec le nom 'fleurs'.",
                            correctAnswer: "belles",
                            explanation: "Le féminin pluriel de 'beau' est 'belles'."
                        }
                    ]
                },
                {
                    id: 3,
                    title: "Système Solaire",
                    category: "science",
                    difficulty: "medium",
                    description: "Testez vos connaissances sur les planètes et les corps célestes de notre système solaire.",
                    type: "matching",
                    questions: 1,
                    duration: 12,
                    progress: 20,
                    questionsList: [
                        {
                            question: "Associez chaque planète à sa caractéristique principale.",
                            pairs: [
                                { item: "Mercure", match: "Plus petite planète" },
                                { item: "Vénus", match: "Planète la plus chaude" },
                                { item: "Terre", match: "Seule planète avec de l'eau liquide" },
                                { item: "Mars", match: "Planète rouge" }
                            ]
                        }
                    ]
                },
                {
                    id: 4,
                    title: "Révolution Française",
                    category: "history",
                    difficulty: "hard",
                    description: "Évaluez vos connaissances sur les événements et personnages clés de la Révolution française.",
                    type: "multiple-choice",
                    questions: 2,
                    duration: 20,
                    progress: 80,
                    questionsList: [
                        {
                            question: "En quelle année a commencé la Révolution française ?",
                            options: ["1776", "1789", "1799", "1815"],
                            correctAnswer: 2,
                            explanation: "La Révolution française a commencé en 1789 avec la prise de la Bastille."
                        },
                        {
                            question: "Qui était le roi de France au début de la Révolution ?",
                            options: ["Louis XIV", "Louis XV", "Louis XVI", "Napoléon Bonaparte"],
                            correctAnswer: 3,
                            explanation: "Louis XVI était le roi de France au début de la Révolution."
                        }
                    ]
                }
            ];

            // Informations de connexion administrateur
            const adminCredentials = {
                username: "admin",
                password: "admin123"
            };

            // Initialisation
            initializeApp();

            // Fonctions d'initialisation
            function initializeApp() {
                loadExercises();
                setupEventListeners();
                checkAdminLoginStatus();
            }

            function setupEventListeners() {
                // Navigation par onglets
                navTabs.forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tabId = tab.getAttribute('data-tab') || tab.id.replace('-btn', '');
                        switchTab(tabId);
                    });
                });

                // Filtres
                filterButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        filterButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        currentFilter = this.getAttribute('data-filter');
                        loadExercises();
                    });
                });

                // Connexion administrateur
                adminLoginBtn.addEventListener('click', adminLogin);
                adminLogoutBtn.addEventListener('click', adminLogout);

                // Gestion des exercices
                addExerciseBtn.addEventListener('click', showExerciseForm);
                cancelExerciseBtn.addEventListener('click', hideExerciseForm);
                saveExerciseBtn.addEventListener('click', saveExercise);
                addQuestionBtn.addEventListener('click', addQuestionForm);
                refreshExercisesBtn.addEventListener('click', refreshAdminData);

                // Démarrer un exercice
                document.addEventListener('click', function(e) {
                    if (e.target.classList.contains('start-exercise-btn') || e.target.closest('.start-exercise-btn')) {
                        const exerciseCard = e.target.closest('.exercise-card');
                        const exerciseId = parseInt(exerciseCard.getAttribute('data-id'));
                        startExercise(exerciseId);
                    }
                });

                // Navigation dans l'exercice
                prevExerciseBtn.addEventListener('click', goToPreviousExercise);
                nextExerciseBtn.addEventListener('click', goToNextExercise);
                submitExerciseBtn.addEventListener('click', submitExercise);
                
                // Vérification des réponses
                checkAnswerBtn.addEventListener('click', checkOpenAnswer);
                checkMatchingBtn.addEventListener('click', checkMatching);
                
                // Navigation des résultats
                restartExerciseBtn.addEventListener('click', () => startExercise(currentExercise.id));
                newExerciseBtn.addEventListener('click', () => {
                    switchTab('exercises');
                });
                
                // Sélection d'options (questions à choix multiples)
                optionsContainer.addEventListener('click', (e) => {
                    const optionElement = e.target.closest('.option');
                    if (optionElement) {
                        selectOption(optionElement);
                    }
                });
            }

            function checkAdminLoginStatus() {
                const adminStatus = localStorage.getItem('adminLoggedIn');
                if (adminStatus === 'true') {
                    isAdminLoggedIn = true;
                    showAdminPanel();
                }
            }

            function switchTab(tabId) {
                // Mettre à jour les onglets actifs
                navTabs.forEach(tab => {
                    if (tab.getAttribute('data-tab') === tabId || tab.id === `${tabId}-btn`) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });

                // Afficher le contenu de l'onglet sélectionné
                tabContents.forEach(content => {
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });

                // Si on passe à l'onglet d'administration et que l'admin n'est pas connecté
                if (tabId === 'admin' && !isAdminLoggedIn) {
                    adminLoginContainer.style.display = 'block';
                    adminPanel.style.display = 'none';
                } else if (tabId === 'admin' && isAdminLoggedIn) {
                    adminLoginContainer.style.display = 'none';
                    adminPanel.style.display = 'block';
                    refreshAdminData();
                }
            }

            function loadExercises() {
                exercisesContainer.innerHTML = '';
                
                const filteredExercises = exercisesData.filter(exercise => {
                    if (currentFilter === 'all') return true;
                    if (currentFilter === exercise.category) return true;
                    if (currentFilter === exercise.difficulty) return true;
                    return false;
                });
                
                filteredExercises.forEach(exercise => {
                    const exerciseElement = createExerciseCard(exercise);
                    exercisesContainer.appendChild(exerciseElement);
                });
            }
            
            function createExerciseCard(exercise) {
                const exerciseElement = document.createElement('div');
                exerciseElement.className = 'exercise-card';
                exerciseElement.setAttribute('data-id', exercise.id);
                
                const difficultyClass = `difficulty-${exercise.difficulty}`;
                const difficultyText = getDifficultyText(exercise.difficulty);
                const categoryIcon = getCategoryIcon(exercise.category);
                
                exerciseElement.innerHTML = `
                    <div class="exercise-header">
                        <h3 class="exercise-title">${exercise.title}</h3>
                        <span class="exercise-difficulty ${difficultyClass}">${difficultyText}</span>
                    </div>
                    <p class="exercise-description">${exercise.description}</p>
                    <div class="exercise-meta">
                        <span><i class="fas fa-${categoryIcon}"></i> ${getCategoryName(exercise.category)}</span>
                        <span><i class="fas fa-list-ol"></i> ${exercise.questions} questions</span>
                        <span><i class="fas fa-clock"></i> ${exercise.duration} min</span>
                    </div>
                    <div class="exercise-footer">
                        <div class="exercise-progress">
                            <div class="progress-circle" style="background: conic-gradient(var(--primary-color) ${exercise.progress}%, #e9ecef 0%)">
                                <span class="progress-text-small">${exercise.progress}%</span>
                            </div>
                            <span class="progress-text-small">Progression</span>
                        </div>
                        <button class="exercise-btn start-exercise-btn">
                            <i class="fas fa-play"></i> Commencer
                        </button>
                    </div>
                `;
                
                return exerciseElement;
            }
            
            function getDifficultyText(difficulty) {
                switch(difficulty) {
                    case 'easy': return 'Facile';
                    case 'medium': return 'Moyen';
                    case 'hard': return 'Difficile';
                    default: return 'Inconnu';
                }
            }
            
            function getCategoryName(category) {
                switch(category) {
                    case 'math': return 'Mathématiques';
                    case 'french': return 'Français';
                    case 'science': return 'Sciences';
                    case 'history': return 'Histoire';
                    default: return 'Autre';
                }
            }
            
            function getCategoryIcon(category) {
                switch(category) {
                    case 'math': return 'calculator';
                    case 'french': return 'book';
                    case 'science': return 'flask';
                    case 'history': return 'landmark';
                    default: return 'question';
                }
            }

            // Fonctions d'administration
            function adminLogin() {
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    isAdminLoggedIn = true;
                    localStorage.setItem('adminLoggedIn', 'true');
                    showAdminPanel();
                    alert('Connexion réussie !');
                } else {
                    alert('Nom d\'utilisateur ou mot de passe incorrect.');
                }
            }
            
            function adminLogout() {
                isAdminLoggedIn = false;
                localStorage.removeItem('adminLoggedIn');
                adminLoginContainer.style.display = 'block';
                adminPanel.style.display = 'none';
                document.getElementById('admin-username').value = '';
                document.getElementById('admin-password').value = '';
                alert('Déconnexion réussie.');
            }
            
            function showAdminPanel() {
                adminLoginContainer.style.display = 'none';
                adminPanel.style.display = 'block';
                adminName.textContent = 'Administrateur';
                refreshAdminData();
            }
            
            function refreshAdminData() {
                loadExercisesTable();
            }
            
            function loadExercisesTable() {
                exercisesTableBody.innerHTML = '';
                
                exercisesData.forEach(exercise => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${exercise.id}</td>
                        <td>${getCategoryName(exercise.category)}</td>
                        <td>${exercise.title}</td>
                        <td>${getExerciseTypeText(exercise.type)}</td>
                        <td>${getDifficultyText(exercise.difficulty)}</td>
                        <td>${exercise.questions}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn edit-btn" data-id="${exercise.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete-btn" data-id="${exercise.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    exercisesTableBody.appendChild(row);
                });
                
                // Ajouter les écouteurs d'événements pour les boutons d'action
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        editExercise(id);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        deleteExercise(id);
                    });
                });
            }
            
            function getExerciseTypeText(type) {
                switch(type) {
                    case 'multiple-choice': return 'Choix multiples';
                    case 'open-answer': return 'Réponse ouverte';
                    case 'matching': return 'Correspondance';
                    default: return 'Inconnu';
                }
            }
            
            function showExerciseForm() {
                isEditingExercise = false;
                editingExerciseId = null;
                document.getElementById('form-title').textContent = 'Ajouter un Exercice';
                exerciseForm.style.display = 'block';
                resetExerciseForm();
            }
            
            function hideExerciseForm() {
                exerciseForm.style.display = 'none';
            }
            
            function resetExerciseForm() {
                document.getElementById('exercise-category').value = 'math';
                document.getElementById('exercise-title').value = '';
                document.getElementById('exercise-description').value = '';
                document.getElementById('exercise-difficulty').value = 'easy';
                document.getElementById('exercise-type').value = 'multiple-choice';
                document.getElementById('exercise-duration').value = '10';
                questionsContainer.innerHTML = '';
                // Ajouter une question par défaut
                addQuestionForm();
            }
            
            function addQuestionForm() {
                const questionIndex = questionsContainer.children.length;
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-form';
                questionDiv.style.border = '1px solid #e9ecef';
                questionDiv.style.borderRadius = '8px';
                questionDiv.style.padding = '15px';
                questionDiv.style.marginBottom = '15px';
                
                questionDiv.innerHTML = `
                    <div class="form-group">
                        <label class="form-label">Question ${questionIndex + 1}</label>
                        <textarea class="form-textarea question-text-input" placeholder="Entrez la question"></textarea>
                    </div>
                    <div class="form-group" id="options-group-${questionIndex}">
                        <label class="form-label">Options (pour les questions à choix multiples)</label>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option A">
                            <input type="text" class="form-input option-input" placeholder="Option B">
                        </div>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option C">
                            <input type="text" class="form-input option-input" placeholder="Option D">
                        </div>
                        <div class="correct-option">
                            <label class="form-label">Réponse correcte:</label>
                            <select class="form-select correct-answer-select">
                                <option value="1">A</option>
                                <option value="2">B</option>
                                <option value="3">C</option>
                                <option value="4">D</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" id="matching-group-${questionIndex}" style="display: none;">
                        <label class="form-label">Paires de correspondance</label>
                        <div class="matching-pairs-form">
                            <div class="matching-pair-form">
                                <div class="option-input-group">
                                    <input type="text" class="form-input matching-item-input" placeholder="Élément">
                                    <input type="text" class="form-input matching-match-input" placeholder="Correspondance">
                                </div>
                            </div>
                            <div class="matching-pair-form">
                                <div class="option-input-group">
                                    <input type="text" class="form-input matching-item-input" placeholder="Élément">
                                    <input type="text" class="form-input matching-match-input" placeholder="Correspondance">
                                </div>
                            </div>
                            <button type="button" class="admin-btn add-matching-pair-btn" style="margin-top: 10px;">
                                <i class="fas fa-plus"></i> Ajouter une paire
                            </button>
                        </div>
                    </div>
                    <button type="button" class="admin-btn delete-question-btn" style="background: var(--incorrect-color); margin-top: 10px;">
                        <i class="fas fa-trash"></i> Supprimer cette question
                    </button>
                `;
                
                questionsContainer.appendChild(questionDiv);
                
                // Ajouter l'écouteur d'événement pour le bouton de suppression
                const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                deleteBtn.addEventListener('click', function() {
                    questionsContainer.removeChild(questionDiv);
                    // Renumérotez les questions
                    const questions = questionsContainer.querySelectorAll('.question-form');
                    questions.forEach((q, index) => {
                        q.querySelector('.form-label').textContent = `Question ${index + 1}`;
                    });
                });
                
                // Gérer l'affichage des options en fonction du type d'exercice
                const exerciseType = document.getElementById('exercise-type');
                updateQuestionFormDisplay(questionDiv, exerciseType.value);
                
                // Écouter les changements de type d'exercice
                exerciseType.addEventListener('change', function() {
                    updateQuestionFormDisplay(questionDiv, this.value);
                });
            }
            
            function updateQuestionFormDisplay(questionDiv, exerciseType) {
                const optionsGroup = questionDiv.querySelector('[id^="options-group-"]');
                const matchingGroup = questionDiv.querySelector('[id^="matching-group-"]');
                
                if (exerciseType === 'multiple-choice') {
                    optionsGroup.style.display = 'block';
                    matchingGroup.style.display = 'none';
                } else if (exerciseType === 'open-answer') {
                    optionsGroup.style.display = 'none';
                    matchingGroup.style.display = 'none';
                } else if (exerciseType === 'matching') {
                    optionsGroup.style.display = 'none';
                    matchingGroup.style.display = 'block';
                }
            }
            
            function editExercise(id) {
                isEditingExercise = true;
                editingExerciseId = id;
                document.getElementById('form-title').textContent = 'Modifier l\'Exercice';
                exerciseForm.style.display = 'block';
                
                const exercise = exercisesData.find(ex => ex.id === id);
                if (exercise) {
                    document.getElementById('exercise-category').value = exercise.category;
                    document.getElementById('exercise-title').value = exercise.title;
                    document.getElementById('exercise-description').value = exercise.description;
                    document.getElementById('exercise-difficulty').value = exercise.difficulty;
                    document.getElementById('exercise-type').value = exercise.type;
                    document.getElementById('exercise-duration').value = exercise.duration;
                    
                    // Charger les questions
                    questionsContainer.innerHTML = '';
                    exercise.questionsList.forEach((question, index) => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'question-form';
                        questionDiv.style.border = '1px solid #e9ecef';
                        questionDiv.style.borderRadius = '8px';
                        questionDiv.style.padding = '15px';
                        questionDiv.style.marginBottom = '15px';
                        
                        let optionsHTML = '';
                        let matchingHTML = '';
                        
                        if (exercise.type === 'multiple-choice') {
                            optionsHTML = `
                                <div class="form-group" id="options-group-${index}">
                                    <label class="form-label">Options</label>
                                    <div class="option-input-group">
                                        <input type="text" class="form-input option-input" placeholder="Option A" value="${question.options[0]}">
                                        <input type="text" class="form-input option-input" placeholder="Option B" value="${question.options[1]}">
                                    </div>
                                    <div class="option-input-group">
                                        <input type="text" class="form-input option-input" placeholder="Option C" value="${question.options[2]}">
                                        <input type="text" class="form-input option-input" placeholder="Option D" value="${question.options[3]}">
                                    </div>
                                    <div class="correct-option">
                                        <label class="form-label">Réponse correcte:</label>
                                        <select class="form-select correct-answer-select">
                                            <option value="1" ${question.correctAnswer === 1 ? 'selected' : ''}>A</option>
                                            <option value="2" ${question.correctAnswer === 2 ? 'selected' : ''}>B</option>
                                            <option value="3" ${question.correctAnswer === 3 ? 'selected' : ''}>C</option>
                                            <option value="4" ${question.correctAnswer === 4 ? 'selected' : ''}>D</option>
                                        </select>
                                    </div>
                                </div>
                            `;
                        } else if (exercise.type === 'matching') {
                            let pairsHTML = '';
                            question.pairs.forEach(pair => {
                                pairsHTML += `
                                    <div class="matching-pair-form">
                                        <div class="option-input-group">
                                            <input type="text" class="form-input matching-item-input" placeholder="Élément" value="${pair.item}">
                                            <input type="text" class="form-input matching-match-input" placeholder="Correspondance" value="${pair.match}">
                                        </div>
                                    </div>
                                `;
                            });
                            
                            matchingHTML = `
                                <div class="form-group" id="matching-group-${index}">
                                    <label class="form-label">Paires de correspondance</label>
                                    <div class="matching-pairs-form">
                                        ${pairsHTML}
                                        <button type="button" class="admin-btn add-matching-pair-btn" style="margin-top: 10px;">
                                            <i class="fas fa-plus"></i> Ajouter une paire
                                        </button>
                                    </div>
                                </div>
                            `;
                        }
                        
                        questionDiv.innerHTML = `
                            <div class="form-group">
                                <label class="form-label">Question ${index + 1}</label>
                                <textarea class="form-textarea question-text-input" placeholder="Entrez la question">${question.question}</textarea>
                            </div>
                            ${optionsHTML}
                            ${matchingHTML}
                            <button type="button" class="admin-btn delete-question-btn" style="background: var(--incorrect-color); margin-top: 10px;">
                                <i class="fas fa-trash"></i> Supprimer cette question
                            </button>
                        `;
                        
                        questionsContainer.appendChild(questionDiv);
                        
                        // Ajouter l'écouteur d'événement pour le bouton de suppression
                        const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                        deleteBtn.addEventListener('click', function() {
                            questionsContainer.removeChild(questionDiv);
                            // Renumérotez les questions
                            const questions = questionsContainer.querySelectorAll('.question-form');
                            questions.forEach((q, idx) => {
                                q.querySelector('.form-label').textContent = `Question ${idx + 1}`;
                            });
                        });
                        
                        // Mettre à jour l'affichage en fonction du type d'exercice
                        updateQuestionFormDisplay(questionDiv, exercise.type);
                    });
                }
            }
            
            function deleteExercise(id) {
                if (confirm('Êtes-vous sûr de vouloir supprimer cet exercice ?')) {
                    exercisesData = exercisesData.filter(ex => ex.id !== id);
                    saveExercisesData();
                    refreshAdminData();
                    loadExercises();
                }
            }
            
            function saveExercise() {
                const category = document.getElementById('exercise-category').value;
                const title = document.getElementById('exercise-title').value;
                const description = document.getElementById('exercise-description').value;
                const difficulty = document.getElementById('exercise-difficulty').value;
                const type = document.getElementById('exercise-type').value;
                const duration = parseInt(document.getElementById('exercise-duration').value);
                
                if (!title || !description) {
                    alert('Veuillez remplir tous les champs obligatoires.');
                    return;
                }
                
                // Récupérer les questions
                const questionForms = questionsContainer.querySelectorAll('.question-form');
                if (questionForms.length === 0) {
                    alert('Veuillez ajouter au moins une question.');
                    return;
                }
                
                const questionsList = [];
                questionForms.forEach(form => {
                    const questionText = form.querySelector('.question-text-input').value;
                    
                    if (!questionText) {
                        alert('Veuillez remplir toutes les questions.');
                        return;
                    }
                    
                    let questionData = { question: questionText };
                    
                    if (type === 'multiple-choice') {
                        const optionInputs = form.querySelectorAll('.option-input');
                        const correctAnswer = parseInt(form.querySelector('.correct-answer-select').value);
                        
                        const options = Array.from(optionInputs).map(input => input.value);
                        if (options.some(opt => !opt)) {
                            alert('Veuillez remplir toutes les options pour chaque question.');
                            return;
                        }
                        
                        questionData.options = options;
                        questionData.correctAnswer = correctAnswer;
                        questionData.explanation = "Explication de la réponse correcte";
                    } else if (type === 'open-answer') {
                        questionData.correctAnswer = "Réponse correcte";
                        questionData.explanation = "Explication de la réponse correcte";
                    } else if (type === 'matching') {
                        const itemInputs = form.querySelectorAll('.matching-item-input');
                        const matchInputs = form.querySelectorAll('.matching-match-input');
                        
                        const pairs = [];
                        for (let i = 0; i < itemInputs.length; i++) {
                            if (itemInputs[i].value && matchInputs[i].value) {
                                pairs.push({
                                    item: itemInputs[i].value,
                                    match: matchInputs[i].value
                                });
                            }
                        }
                        
                        if (pairs.length < 2) {
                            alert('Veuillez ajouter au moins deux paires de correspondance.');
                            return;
                        }
                        
                        questionData.pairs = pairs;
                    }
                    
                    questionsList.push(questionData);
                });
                
                if (isEditingExercise) {
                    // Mettre à jour l'exercice existant
                    const exerciseIndex = exercisesData.findIndex(ex => ex.id === editingExerciseId);
                    if (exerciseIndex !== -1) {
                        exercisesData[exerciseIndex].category = category;
                        exercisesData[exerciseIndex].title = title;
                        exercisesData[exerciseIndex].description = description;
                        exercisesData[exerciseIndex].difficulty = difficulty;
                        exercisesData[exerciseIndex].type = type;
                        exercisesData[exerciseIndex].duration = duration;
                        exercisesData[exerciseIndex].questions = questionsList.length;
                        exercisesData[exerciseIndex].questionsList = questionsList;
                    }
                } else {
                    // Ajouter un nouvel exercice
                    const newId = getNextExerciseId();
                    exercisesData.push({
                        id: newId,
                        title: title,
                        category: category,
                        difficulty: difficulty,
                        description: description,
                        type: type,
                        questions: questionsList.length,
                        duration: duration,
                        progress: 0,
                        questionsList: questionsList
                    });
                }
                
                saveExercisesData();
                hideExerciseForm();
                refreshAdminData();
                loadExercises();
                alert('Exercice enregistré avec succès !');
            }
            
            function getNextExerciseId() {
                let maxId = 0;
                exercisesData.forEach(exercise => {
                    if (exercise.id > maxId) {
                        maxId = exercise.id;
                    }
                });
                return maxId + 1;
            }
            
            function saveExercisesData() {
                localStorage.setItem('exercisesData', JSON.stringify(exercisesData));
            }
            
            // Fonctions des exercices (identique à la version précédente)
            function startExercise(exerciseId) {
                currentExercise = exercisesData.find(ex => ex.id === exerciseId);
                if (!currentExercise) return;
                
                currentExerciseIndex = 0;
                userScore = 0;
                userAnswers = new Array(currentExercise.questionsList.length).fill(null);
                timeLeft = currentExercise.duration * 60; // Convertir en secondes
                
                switchTab('exercise-interface');
                
                totalExercisesEl.textContent = currentExercise.questionsList.length;
                currentScoreEl.textContent = userScore;
                
                displayExercise();
                startTimer();
            }
            
            function displayExercise() {
                const exercise = currentExercise.questionsList[currentExerciseIndex];
                
                // Masquer tous les conteneurs de type de question
                optionsContainer.style.display = 'none';
                openAnswerContainer.style.display = 'none';
                matchingContainer.style.display = 'none';
                
                // Afficher les éléments communs
                exerciseInstructions.textContent = getInstructionsByType(currentExercise.type);
                exerciseQuestion.textContent = exercise.question;
                exerciseImage.innerHTML = `<i class="fas fa-${getCategoryIcon(currentExercise.category)}"></i>`;
                
                // Afficher le conteneur approprié selon le type d'exercice
                switch(currentExercise.type) {
                    case 'multiple-choice':
                        displayMultipleChoice(exercise);
                        break;
                    case 'open-answer':
                        displayOpenAnswer(exercise);
                        break;
                    case 'matching':
                        displayMatching(exercise);
                        break;
                }
                
                // Mettre à jour la progression
                currentExerciseEl.textContent = currentExerciseIndex + 1;
                progressFill.style.width = `${((currentExerciseIndex + 1) / currentExercise.questionsList.length) * 100}%`;
                
                // Gérer les boutons de navigation
                prevExerciseBtn.disabled = currentExerciseIndex === 0;
                
                if (currentExerciseIndex === currentExercise.questionsList.length - 1) {
                    nextExerciseBtn.style.display = 'none';
                    submitExerciseBtn.style.display = 'block';
                } else {
                    nextExerciseBtn.style.display = 'block';
                    submitExerciseBtn.style.display = 'none';
                }
                
                // Si l'utilisateur a déjà répondu à cette question, afficher la réponse
                if (userAnswers[currentExerciseIndex] !== null) {
                    showUserAnswer();
                }
            }
            
            function getInstructionsByType(type) {
                switch(type) {
                    case 'multiple-choice':
                        return "Choisissez la bonne réponse parmi les options suivantes :";
                    case 'open-answer':
                        return "Entrez votre réponse dans le champ ci-dessous :";
                    case 'matching':
                        return "Faites correspondre les éléments des deux colonnes :";
                    default:
                        return "Répondez à la question suivante :";
                }
            }
            
            function displayMultipleChoice(exercise) {
                optionsContainer.style.display = 'grid';
                optionsContainer.innerHTML = '';
                
                exercise.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.setAttribute('data-option', index + 1);
                    
                    const optionLetter = document.createElement('div');
                    optionLetter.className = 'option-letter';
                    optionLetter.textContent = String.fromCharCode(65 + index); // A, B, C, D
                    
                    const optionText = document.createElement('div');
                    optionText.className = 'option-text';
                    optionText.textContent = option;
                    
                    optionElement.appendChild(optionLetter);
                    optionElement.appendChild(optionText);
                    
                    // Si l'utilisateur a déjà répondu à cette question
                    if (userAnswers[currentExerciseIndex] === index + 1) {
                        optionElement.classList.add('selected');
                        if (index + 1 === exercise.correctAnswer) {
                            optionElement.classList.add('correct');
                        } else {
                            optionElement.classList.add('incorrect');
                            // Afficher la bonne réponse
                            optionsContainer.querySelector(`[data-option="${exercise.correctAnswer}"]`).classList.add('correct');
                        }
                    }
                    
                    optionsContainer.appendChild(optionElement);
                });
            }
            
            function displayOpenAnswer(exercise) {
                openAnswerContainer.style.display = 'block';
                openAnswerInput.value = userAnswers[currentExerciseIndex] || '';
                
                // Si l'utilisateur a déjà répondu à cette question
                if (userAnswers[currentExerciseIndex] !== null) {
                    const userAnswer = userAnswers[currentExerciseIndex];
                    const isCorrect = userAnswer.toLowerCase().trim() === exercise.correctAnswer.toLowerCase().trim();
                    
                    if (isCorrect) {
                        openAnswerInput.style.borderColor = 'var(--correct-color)';
                        openAnswerInput.style.backgroundColor = '#f0fdf4';
                    } else {
                        openAnswerInput.style.borderColor = 'var(--incorrect-color)';
                        openAnswerInput.style.backgroundColor = '#fef2f2';
                        // Afficher la bonne réponse
                        setTimeout(() => {
                            alert(`La bonne réponse était : ${exercise.correctAnswer}\n\n${exercise.explanation}`);
                        }, 500);
                    }
                    
                    checkAnswerBtn.disabled = true;
                } else {
                    openAnswerInput.style.borderColor = '#e9ecef';
                    openAnswerInput.style.backgroundColor = 'white';
                    checkAnswerBtn.disabled = false;
                }
            }
            
            function displayMatching(exercise) {
                matchingContainer.style.display = 'block';
                matchingPairs.innerHTML = '';
                
                // Mélanger les paires pour l'exercice
                const shuffledPairs = [...exercise.pairs];
                shuffleArray(shuffledPairs);
                
                shuffledPairs.forEach((pair, index) => {
                    const pairElement = document.createElement('div');
                    pairElement.className = 'matching-pair';
                    pairElement.style.display = 'flex';
                    pairElement.style.justifyContent = 'space-between';
                    pairElement.style.alignItems = 'center';
                    pairElement.style.marginBottom = '10px';
                    pairElement.style.padding = '10px';
                    pairElement.style.border = '1px solid #e9ecef';
                    pairElement.style.borderRadius = '8px';
                    
                    const itemElement = document.createElement('div');
                    itemElement.textContent = pair.item;
                    itemElement.style.fontWeight = '500';
                    
                    const selectElement = document.createElement('select');
                    selectElement.className = 'matching-select';
                    selectElement.style.padding = '8px';
                    selectElement.style.borderRadius = '4px';
                    selectElement.style.border = '1px solid #e9ecef';
                    
                    // Option vide
                    const emptyOption = document.createElement('option');
                    emptyOption.value = '';
                    emptyOption.textContent = '-- Sélectionnez --';
                    selectElement.appendChild(emptyOption);
                    
                    // Options de correspondance
                    exercise.pairs.forEach(p => {
                        const option = document.createElement('option');
                        option.value = p.match;
                        option.textContent = p.match;
                        selectElement.appendChild(option);
                    });
                    
                    // Si l'utilisateur a déjà répondu
                    if (userAnswers[currentExerciseIndex] && userAnswers[currentExerciseIndex][index]) {
                        selectElement.value = userAnswers[currentExerciseIndex][index];
                    }
                    
                    pairElement.appendChild(itemElement);
                    pairElement.appendChild(selectElement);
                    matchingPairs.appendChild(pairElement);
                });
            }
            
            function selectOption(optionElement) {
                // Si l'utilisateur a déjà répondu à cette question, on ne fait rien
                if (userAnswers[currentExerciseIndex] !== null) return;
                
                // Enlever la sélection précédente
                const options = document.querySelectorAll('.option');
                options.forEach(opt => opt.classList.remove('selected'));
                
                // Sélectionner l'option cliquée
                optionElement.classList.add('selected');
                
                // Enregistrer la réponse de l'utilisateur
                const selectedOption = parseInt(optionElement.getAttribute('data-option'));
                userAnswers[currentExerciseIndex] = selectedOption;
                
                // Vérifier si la réponse est correcte
                const exercise = currentExercise.questionsList[currentExerciseIndex];
                if (selectedOption === exercise.correctAnswer) {
                    userScore++;
                    currentScoreEl.textContent = userScore;
                    optionElement.classList.add('correct');
                } else {
                    optionElement.classList.add('incorrect');
                    // Afficher la bonne réponse
                    options.forEach(opt => {
                        if (parseInt(opt.getAttribute('data-option')) === exercise.correctAnswer) {
                            opt.classList.add('correct');
                        }
                    });
                }
                
                // Désactiver les options après sélection
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
            }
            
            function checkOpenAnswer() {
                const userAnswer = openAnswerInput.value.trim();
                if (!userAnswer) {
                    alert('Veuillez entrer une réponse');
                    return;
                }
                
                const exercise = currentExercise.questionsList[currentExerciseIndex];
                const isCorrect = userAnswer.toLowerCase() === exercise.correctAnswer.toLowerCase();
                
                // Enregistrer la réponse de l'utilisateur
                userAnswers[currentExerciseIndex] = userAnswer;
                
                if (isCorrect) {
                    userScore++;
                    currentScoreEl.textContent = userScore;
                    openAnswerInput.style.borderColor = 'var(--correct-color)';
                    openAnswerInput.style.backgroundColor = '#f0fdf4';
                } else {
                    openAnswerInput.style.borderColor = 'var(--incorrect-color)';
                    openAnswerInput.style.backgroundColor = '#fef2f2';
                    // Afficher la bonne réponse
                    setTimeout(() => {
                        alert(`La bonne réponse était : ${exercise.correctAnswer}\n\n${exercise.explanation}`);
                    }, 500);
                }
                
                checkAnswerBtn.disabled = true;
            }
            
            function checkMatching() {
                const selectElements = matchingPairs.querySelectorAll('.matching-select');
                let allAnswered = true;
                const userSelections = [];
                
                selectElements.forEach(select => {
                    if (!select.value) {
                        allAnswered = false;
                    }
                    userSelections.push(select.value);
                });
                
                if (!allAnswered) {
                    alert('Veuillez faire toutes les correspondances');
                    return;
                }
                
                // Enregistrer les réponses de l'utilisateur
                userAnswers[currentExerciseIndex] = userSelections;
                
                // Vérifier les réponses
                const exercise = currentExercise.questionsList[currentExerciseIndex];
                let correctCount = 0;
                
                const shuffledPairs = [...exercise.pairs];
                shuffleArray(shuffledPairs);
                
                shuffledPairs.forEach((pair, index) => {
                    if (userSelections[index] === pair.match) {
                        correctCount++;
                        selectElements[index].style.borderColor = 'var(--correct-color)';
                    } else {
                        selectElements[index].style.borderColor = 'var(--incorrect-color)';
                    }
                });
                
                // Mettre à jour le score
                if (correctCount === exercise.pairs.length) {
                    userScore++;
                    currentScoreEl.textContent = userScore;
                }
                
                checkMatchingBtn.disabled = true;
            }
            
            function showUserAnswer() {
                // Cette fonction affiche la réponse de l'utilisateur s'il a déjà répondu
                // Elle est appelée dans displayExercise()
                // L'implémentation spécifique dépend du type d'exercice et est gérée dans chaque fonction d'affichage
            }
            
            function goToPreviousExercise() {
                if (currentExerciseIndex > 0) {
                    currentExerciseIndex--;
                    displayExercise();
                }
            }
            
            function goToNextExercise() {
                if (currentExerciseIndex < currentExercise.questionsList.length - 1) {
                    currentExerciseIndex++;
                    displayExercise();
                }
            }
            
            function startTimer() {
                clearInterval(timerInterval);
                updateTimerDisplay();
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        submitExercise();
                    }
                }, 1000);
            }
            
            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timeLeftEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 60) { // 1 minute restante
                    timeLeftEl.style.color = 'var(--incorrect-color)';
                } else {
                    timeLeftEl.style.color = 'inherit';
                }
            }
            
            function submitExercise() {
                clearInterval(timerInterval);
                
                // Calculer le score final
                const finalScore = Math.round((userScore / currentExercise.questionsList.length) * 100);
                const timeSpent = (currentExercise.duration * 60) - timeLeft;
                
                // Afficher les résultats
                switchTab('exercise-results');
                
                // Mettre à jour l'interface des résultats
                document.querySelector('.result-score').textContent = `${finalScore}%`;
                
                // Changer l'icône en fonction du score
                const resultIcon = document.querySelector('.result-icon');
                resultIcon.className = 'result-icon ';
                if (finalScore >= 90) {
                    resultIcon.classList.add('excellent');
                    resultIcon.innerHTML = '<i class="fas fa-trophy"></i>';
                    document.querySelector('.result-title').textContent = 'Excellent !';
                    document.querySelector('.exercise-results p').textContent = 'Vous maîtrisez parfaitement ce sujet !';
                } else if (finalScore >= 70) {
                    resultIcon.classList.add('good');
                    resultIcon.innerHTML = '<i class="fas fa-star"></i>';
                    document.querySelector('.result-title').textContent = 'Très bien !';
                    document.querySelector('.exercise-results p').textContent = 'Vous avez une bonne connaissance de ce sujet.';
                } else if (finalScore >= 50) {
                    resultIcon.classList.add('average');
                    resultIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
                    document.querySelector('.result-title').textContent = 'Pas mal !';
                    document.querySelector('.exercise-results p').textContent = 'Continuez à vous améliorer.';
                } else {
                    resultIcon.classList.add('poor');
                    resultIcon.innerHTML = '<i class="fas fa-redo"></i>';
                    document.querySelector('.result-title').textContent = 'À améliorer';
                    document.querySelector('.exercise-results p').textContent = 'Avec un peu plus de pratique, vous progresserez !';
                }
                
                // Mettre à jour les statistiques
                const minutesSpent = Math.floor(timeSpent / 60);
                const secondsSpent = timeSpent % 60;
                
                document.querySelector('.stat-value:nth-child(1)').textContent = `${userScore}/${currentExercise.questionsList.length}`;
                document.querySelector('.stat-value:nth-child(2)').textContent = `${minutesSpent.toString().padStart(2, '0')}:${secondsSpent.toString().padStart(2, '0')}`;
                document.querySelector('.stat-value:nth-child(3)').textContent = `${finalScore}%`;
                
                // Mettre à jour la progression dans les données
                const exerciseIndex = exercisesData.findIndex(ex => ex.id === currentExercise.id);
                if (exerciseIndex !== -1) {
                    exercisesData[exerciseIndex].progress = Math.max(exercisesData[exerciseIndex].progress, finalScore);
                    saveExercisesData();
                }
            }
            
            // Fonction utilitaire pour mélanger un tableau
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
        });
    </script>
</body>
</html>