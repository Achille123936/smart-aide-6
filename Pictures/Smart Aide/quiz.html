<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - EduBot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #7209b7;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --correct-color: #4ade80;
            --incorrect-color: #f87171;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 95%;
            max-width: 1000px;
            background-color: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .nav-tab {
            padding: 8px 16px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .nav-tab:hover, .nav-tab.active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            transition: var(--transition);
        }
        
        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }
        
        .back-button i {
            margin-right: 8px;
        }
        
        .quiz-content {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .quiz-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
        }
        
        .quiz-title h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .quiz-title p {
            color: #6c757d;
            font-size: 1.1rem;
        }
        
        .quiz-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .quiz-category {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .quiz-category:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .category-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.8rem;
            color: white;
        }
        
        .math {
            background: linear-gradient(45deg, #4361ee, #3a0ca3);
        }
        
        .french {
            background: linear-gradient(45deg, #f72585, #b5179e);
        }
        
        .science {
            background: linear-gradient(45deg, #4cc9f0, #4895ef);
        }
        
        .history {
            background: linear-gradient(45deg, #560bad, #7209b7);
        }
        
        .category-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .category-desc {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 15px;
        }
        
        .category-stats {
            display: flex;
            justify-content: space-around;
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Interface du quiz */
        
        .quiz-interface {
            display: none;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .quiz-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-text {
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .quiz-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .timer-critical {
            color: var(--incorrect-color);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
            100% {
                opacity: 1;
            }
        }
        
        .quiz-score {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .question-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-color);
            line-height: 1.5;
        }
        
        .question-image {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 3rem;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        .option {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            background-color: #f8f9ff;
        }
        
        .option.selected {
            border-color: var(--primary-color);
            background-color: #e6f2ff;
        }
        
        .option.correct {
            border-color: var(--correct-color);
            background-color: #f0fdf4;
        }
        
        .option.incorrect {
            border-color: var(--incorrect-color);
            background-color: #fef2f2;
        }
        
        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option.selected .option-letter {
            background: var(--primary-color);
            color: white;
        }
        
        .option.correct .option-letter {
            background: var(--correct-color);
            color: white;
        }
        
        .option.incorrect .option-letter {
            background: var(--incorrect-color);
            color: white;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quiz-btn {
            padding: 12px 25px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .quiz-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .quiz-btn:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Résultats du quiz */
        
        .quiz-results {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .result-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: white;
        }
        
        .excellent {
            background: linear-gradient(45deg, var(--correct-color), #16a34a);
        }
        
        .good {
            background: linear-gradient(45deg, #4cc9f0, #3b82f6);
        }
        
        .average {
            background: linear-gradient(45deg, #f59e0b, #f97316);
        }
        
        .poor {
            background: linear-gradient(45deg, var(--incorrect-color), #dc2626);
        }
        
        .result-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .result-score {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .result-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Module d'exercices */
        
        .exercises-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .exercise-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .exercise-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .exercise-title {
            font-size: 1.2rem;
            color: var(--dark-color);
        }
        
        .exercise-difficulty {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .difficulty-easy {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .difficulty-medium {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .difficulty-hard {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .exercise-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .exercise-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .exercise-progress {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0%, #e9ecef 0%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-text-small {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        /* Interface d'administration */
        
        .admin-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
        }
        
        .admin-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .admin-btn:hover {
            opacity: 0.9;
        }
        
        .admin-btn.delete {
            background: var(--incorrect-color);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .admin-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .admin-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 4px 8px;
            background: none;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .edit-btn {
            color: var(--primary-color);
        }
        
        .delete-btn {
            color: var(--incorrect-color);
        }
        
        .action-btn:hover {
            background-color: #f0f0f0;
        }
        
        /* Formulaire d'administration */
        
        .admin-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .option-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .option-input {
            flex: 1;
        }
        
        .correct-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .quiz-selection {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            .back-button {
                align-self: center;
            }
            .quiz-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .quiz-controls {
                flex-direction: column;
                gap: 15px;
            }
            .result-stats {
                grid-template-columns: 1fr;
            }
            .result-actions {
                flex-direction: column;
            }
            .admin-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div>
                <h1><i class="fas fa-brain"></i> EduBot</h1>
                <div class="nav-tabs">
                    <a href="#" class="nav-tab active" data-tab="quiz">Quiz</a>
                    <a href="#" class="nav-tab" data-tab="exercises">Exercices</a>
                    <a href="#" class="nav-tab" data-tab="admin">Administration</a>
                </div>
            </div>
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Retour à l'Accueil
            </a>
        </div>

        <div class="quiz-content">
            <!-- Onglet Quiz -->
            <div class="tab-content active" id="quiz-tab">
                <div class="quiz-title">
                    <h1>Testez Vos Connaissances</h1>
                    <p>Choisissez une catégorie et relevez le défi !</p>
                </div>

                <div class="quiz-selection" id="quiz-selection">
                    <!-- Les catégories de quiz seront chargées dynamiquement -->
                </div>

                <div class="quiz-interface" id="quiz-interface">
                    <div class="quiz-header">
                        <div class="quiz-progress">
                            <span class="progress-text">Question <span id="current-question">1</span>/<span id="total-questions">10</span></span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                        </div>
                        <div class="quiz-timer" id="quiz-timer">
                            <i class="fas fa-clock"></i>
                            <span id="time-left">01:00</span>
                        </div>
                        <div class="quiz-score">
                            <i class="fas fa-star"></i>
                            <span>Score: <span id="current-score">0</span></span>
                        </div>
                    </div>

                    <div class="question-container">
                        <h2 class="question-text" id="question-text">Chargement de la question...</h2>
                        <div class="question-image" id="question-image">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="options-container" id="options-container">
                            <!-- Les options seront chargées dynamiquement -->
                        </div>
                    </div>

                    <div class="quiz-controls">
                        <button class="quiz-btn" id="prev-btn" disabled>
                            <i class="fas fa-arrow-left"></i> Précédent
                        </button>
                        <button class="quiz-btn" id="next-btn">
                            Suivant <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="quiz-btn" id="submit-btn" style="display: none;">
                            <i class="fas fa-paper-plane"></i> Soumettre
                        </button>
                    </div>
                </div>

                <div class="quiz-results" id="quiz-results">
                    <div class="result-icon excellent">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h2 class="result-title">Félicitations !</h2>
                    <div class="result-score">85%</div>
                    <p>Vous avez excellé dans ce quiz ! Continuez comme ça.</p>

                    <div class="result-stats">
                        <div class="result-stat">
                            <div class="stat-value">8/10</div>
                            <div class="stat-label">Réponses correctes</div>
                        </div>
                        <div class="result-stat">
                            <div class="stat-value">04:32</div>
                            <div class="stat-label">Temps passé</div>
                        </div>
                        <div class="result-stat">
                            <div class="stat-value">85%</div>
                            <div class="stat-label">Score final</div>
                        </div>
                    </div>

                    <div class="result-actions">
                        <button class="quiz-btn" id="restart-btn">
                            <i class="fas fa-redo"></i> Recommencer
                        </button>
                        <button class="quiz-btn" id="new-quiz-btn">
                            <i class="fas fa-list"></i> Nouveau Quiz
                        </button>
                        <a href="index.html" class="quiz-btn">
                            <i class="fas fa-home"></i> Accueil
                        </a>
                    </div>
                </div>
            </div>

            <!-- Onglet Exercices -->
            <div class="tab-content" id="exercises-tab">
                <div class="quiz-title">
                    <h1>Exercices Pratiques</h1>
                    <p>Renforcez vos connaissances avec ces exercices interactifs</p>
                </div>

                <div class="exercises-container" id="exercises-container">
                    <!-- Les exercices seront chargés dynamiquement -->
                </div>
            </div>

            <!-- Onglet Administration -->
            <div class="tab-content" id="admin-tab">
                <div class="quiz-title">
                    <h1>Administration</h1>
                    <p>Gérez les quiz, exercices et utilisateurs</p>
                </div>

                <div class="admin-container">
                    <div class="admin-header">
                        <h2>Gestion des Quiz</h2>
                        <div class="admin-actions">
                            <button class="admin-btn" id="add-quiz-btn">
                                <i class="fas fa-plus"></i> Ajouter un Quiz
                            </button>
                            <button class="admin-btn" id="refresh-data-btn">
                                <i class="fas fa-sync-alt"></i> Actualiser
                            </button>
                        </div>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Catégorie</th>
                                <th>Titre</th>
                                <th>Questions</th>
                                <th>Difficulté</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="quiz-table-body">
                            <!-- Les quiz seront chargés dynamiquement -->
                        </tbody>
                    </table>

                    <div class="admin-form" id="quiz-form">
                        <h3 id="form-title">Ajouter un Quiz</h3>
                        <div class="form-group">
                            <label class="form-label" for="quiz-category">Catégorie</label>
                            <select class="form-select" id="quiz-category">
                                <option value="math">Mathématiques</option>
                                <option value="french">Français</option>
                                <option value="science">Sciences</option>
                                <option value="history">Histoire-Géographie</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="quiz-title">Titre du Quiz</label>
                            <input type="text" class="form-input" id="quiz-title" placeholder="Entrez le titre du quiz">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="quiz-difficulty">Difficulté</label>
                            <select class="form-select" id="quiz-difficulty">
                                <option value="easy">Facile</option>
                                <option value="medium">Moyen</option>
                                <option value="hard">Difficile</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Questions</label>
                            <div id="questions-container">
                                <!-- Les questions seront ajoutées dynamiquement -->
                            </div>
                            <button type="button" class="admin-btn" id="add-question-btn">
                                <i class="fas fa-plus"></i> Ajouter une Question
                            </button>
                        </div>
                        <div class="form-actions">
                            <button class="admin-btn" id="cancel-quiz-btn">Annuler</button>
                            <button class="admin-btn" id="save-quiz-btn">Enregistrer</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Éléments DOM
            const navTabs = document.querySelectorAll('.nav-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const quizSelection = document.getElementById('quiz-selection');
            const quizInterface = document.getElementById('quiz-interface');
            const quizResults = document.getElementById('quiz-results');
            const questionText = document.getElementById('question-text');
            const questionImage = document.getElementById('question-image');
            const optionsContainer = document.getElementById('options-container');
            const currentQuestionEl = document.getElementById('current-question');
            const totalQuestionsEl = document.getElementById('total-questions');
            const progressFill = document.getElementById('progress-fill');
            const timeLeftEl = document.getElementById('time-left');
            const currentScoreEl = document.getElementById('current-score');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const restartBtn = document.getElementById('restart-btn');
            const newQuizBtn = document.getElementById('new-quiz-btn');
            const exercisesContainer = document.getElementById('exercises-container');
            const quizTableBody = document.getElementById('quiz-table-body');
            const quizForm = document.getElementById('quiz-form');
            const addQuizBtn = document.getElementById('add-quiz-btn');
            const cancelQuizBtn = document.getElementById('cancel-quiz-btn');
            const saveQuizBtn = document.getElementById('save-quiz-btn');
            const addQuestionBtn = document.getElementById('add-question-btn');
            const questionsContainer = document.getElementById('questions-container');
            const refreshDataBtn = document.getElementById('refresh-data-btn');

            // Variables du quiz
            let currentCategory = '';
            let currentQuiz = [];
            let currentQuestionIndex = 0;
            let userScore = 0;
            let timerInterval = null;
            let timeLeft = 60;
            let userAnswers = [];
            let isEditingQuiz = false;
            let editingQuizId = null;

            // Données des quiz (stockées dans localStorage)
            let quizData = JSON.parse(localStorage.getItem('quizData')) || {
                math: [{
                    id: 1,
                    title: "Mathématiques Basiques",
                    difficulty: "easy",
                    questions: [{
                        question: "Quelle est la valeur de π arrondie à deux décimales ?",
                        image: "math",
                        options: ["3.14", "3.16", "3.12", "3.18"],
                        correctAnswer: 1
                    }, {
                        question: "Si x + 5 = 12, quelle est la valeur de x ?",
                        image: "algebra",
                        options: ["5", "6", "7", "8"],
                        correctAnswer: 3
                    }, {
                        question: "Quelle est la racine carrée de 64 ?",
                        image: "calculation",
                        options: ["6", "7", "8", "9"],
                        correctAnswer: 3
                    }]
                }],
                french: [{
                    id: 2,
                    title: "Grammaire Française",
                    difficulty: "medium",
                    questions: [{
                        question: "Quel est le participe passé du verbe 'avoir' ?",
                        image: "grammar",
                        options: ["avé", "avu", "eu", "avue"],
                        correctAnswer: 3
                    }, {
                        question: "Quel mot est correctement orthographié ?",
                        image: "spelling",
                        options: ["Accueil", "Aceuil", "Accueille", "Acueil"],
                        correctAnswer: 1
                    }, {
                        question: "Qui a écrit 'Les Misérables' ?",
                        image: "literature",
                        options: ["Victor Hugo", "Émile Zola", "Gustave Flaubert", "Albert Camus"],
                        correctAnswer: 1
                    }]
                }],
                science: [{
                    id: 3,
                    title: "Sciences Générales",
                    difficulty: "easy",
                    questions: [{
                        question: "Quel gaz les plantes absorbent-elles pendant la photosynthèse ?",
                        image: "biology",
                        options: ["Oxygène", "Azote", "Dioxyde de carbone", "Hydrogène"],
                        correctAnswer: 3
                    }, {
                        question: "Quel est l'élément chimique le plus abondant dans l'univers ?",
                        image: "chemistry",
                        options: ["Oxygène", "Carbone", "Hydrogène", "Hélium"],
                        correctAnswer: 3
                    }, {
                        question: "Quelle planète est surnommée 'la planète rouge' ?",
                        image: "astronomy",
                        options: ["Vénus", "Jupiter", "Mars", "Mercure"],
                        correctAnswer: 3
                    }]
                }],
                history: [{
                    id: 4,
                    title: "Histoire Mondiale",
                    difficulty: "medium",
                    questions: [{
                        question: "En quelle année a eu lieu la Révolution française ?",
                        image: "history",
                        options: ["1789", "1799", "1776", "1812"],
                        correctAnswer: 1
                    }, {
                        question: "Qui a été le premier président des États-Unis ?",
                        image: "history",
                        options: ["Thomas Jefferson", "George Washington", "Abraham Lincoln", "John Adams"],
                        correctAnswer: 2
                    }, {
                        question: "Quelle civilisation a construit les pyramides de Gizeh ?",
                        image: "history",
                        options: ["Les Romains", "Les Grecs", "Les Égyptiens", "Les Mayas"],
                        correctAnswer: 3
                    }]
                }]
            };

            // Données des exercices
            const exercisesData = [{
                id: 1,
                title: "Problèmes de Mathématiques",
                category: "math",
                difficulty: "medium",
                description: "Résolvez ces problèmes mathématiques pour améliorer vos compétences en calcul.",
                progress: 65
            }, {
                id: 2,
                title: "Exercices de Grammaire",
                category: "french",
                difficulty: "easy",
                description: "Améliorez votre grammaire française avec ces exercices interactifs.",
                progress: 40
            }, {
                id: 3,
                title: "Expériences Scientifiques",
                category: "science",
                difficulty: "hard",
                description: "Découvrez des concepts scientifiques à travers des expériences virtuelles.",
                progress: 20
            }, {
                id: 4,
                title: "Chronologie Historique",
                category: "history",
                difficulty: "medium",
                description: "Testez vos connaissances sur les événements historiques importants.",
                progress: 80
            }];

            // Initialisation
            initializeApp();

            // Écouteurs d'événements
            navTabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = tab.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });

            prevBtn.addEventListener('click', goToPreviousQuestion);
            nextBtn.addEventListener('click', goToNextQuestion);
            submitBtn.addEventListener('click', submitQuiz);
            restartBtn.addEventListener('click', () => startQuiz(currentCategory));
            newQuizBtn.addEventListener('click', () => {
                quizInterface.style.display = 'none';
                quizResults.style.display = 'none';
                quizSelection.style.display = 'grid';
            });

            addQuizBtn.addEventListener('click', showQuizForm);
            cancelQuizBtn.addEventListener('click', hideQuizForm);
            saveQuizBtn.addEventListener('click', saveQuiz);
            addQuestionBtn.addEventListener('click', addQuestionForm);
            refreshDataBtn.addEventListener('click', refreshAdminData);

            // Fonctions d'initialisation
            function initializeApp() {
                loadQuizCategories();
                loadExercises();
                refreshAdminData();
            }

            function switchTab(tabId) {
                // Mettre à jour les onglets actifs
                navTabs.forEach(tab => {
                    if (tab.getAttribute('data-tab') === tabId) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });

                // Afficher le contenu de l'onglet sélectionné
                tabContents.forEach(content => {
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });
            }

            function loadQuizCategories() {
                quizSelection.innerHTML = '';

                const categories = [
                    { id: 'math', name: 'Mathématiques', icon: 'calculator', desc: 'Algèbre, géométrie, calcul et problèmes logiques', questions: 15, difficulty: 'Difficile' },
                    { id: 'french', name: 'Français', icon: 'book', desc: 'Grammaire, orthographe, conjugaison et littérature', questions: 12, difficulty: 'Moyen' },
                    { id: 'science', name: 'Sciences', icon: 'flask', desc: 'Physique, chimie, biologie et découvertes', questions: 10, difficulty: 'Facile' },
                    { id: 'history', name: 'Histoire-Géographie', icon: 'landmark', desc: 'Dates importantes, personnages historiques et cultures', questions: 14, difficulty: 'Moyen' }
                ];

                categories.forEach(category => {
                    const categoryElement = document.createElement('div');
                    categoryElement.className = 'quiz-category';
                    categoryElement.setAttribute('data-category', category.id);

                    categoryElement.innerHTML = `
                        <div class="category-icon ${category.id}">
                            <i class="fas fa-${category.icon}"></i>
                        </div>
                        <h3 class="category-title">${category.name}</h3>
                        <p class="category-desc">${category.desc}</p>
                        <div class="category-stats">
                            <div class="stat">
                                <i class="fas fa-list-ol"></i>
                                <span>${category.questions} questions</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-star"></i>
                                <span>${category.difficulty}</span>
                            </div>
                        </div>
                    `;

                    categoryElement.addEventListener('click', () => {
                        currentCategory = category.id;
                        startQuiz(currentCategory);
                    });

                    quizSelection.appendChild(categoryElement);
                });
            }

            function loadExercises() {
                exercisesContainer.innerHTML = '';

                exercisesData.forEach(exercise => {
                    const exerciseElement = document.createElement('div');
                    exerciseElement.className = 'exercise-card';

                    const difficultyClass = `difficulty-${exercise.difficulty}`;

                    exerciseElement.innerHTML = `
                        <div class="exercise-header">
                            <h3 class="exercise-title">${exercise.title}</h3>
                            <span class="exercise-difficulty ${difficultyClass}">${getDifficultyText(exercise.difficulty)}</span>
                        </div>
                        <p class="exercise-description">${exercise.description}</p>
                        <div class="exercise-footer">
                            <div class="exercise-progress">
                                <div class="progress-circle" style="background: conic-gradient(var(--primary-color) ${exercise.progress}%, #e9ecef 0%)">
                                    <span class="progress-text-small">${exercise.progress}%</span>
                                </div>
                                <span class="progress-text-small">Progression</span>
                            </div>
                            <button class="quiz-btn start-exercise-btn" data-id="${exercise.id}">
                                <i class="fas fa-play"></i> Commencer
                            </button>
                        </div>
                    `;

                    exercisesContainer.appendChild(exerciseElement);
                });

                // Ajouter les écouteurs d'événements pour les boutons de démarrage d'exercice
                document.querySelectorAll('.start-exercise-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const exerciseId = this.getAttribute('data-id');
                        startExercise(exerciseId);
                    });
                });
            }

            function getDifficultyText(difficulty) {
                switch(difficulty) {
                    case 'easy': return 'Facile';
                    case 'medium': return 'Moyen';
                    case 'hard': return 'Difficile';
                    default: return 'Inconnu';
                }
            }

            function startExercise(exerciseId) {
                alert(`Démarrage de l'exercice ${exerciseId}. Cette fonctionnalité serait implémentée avec une interface d'exercice dédiée.`);
                // Ici, vous pourriez rediriger vers une page d'exercice ou afficher une interface d'exercice
            }

            // Fonctions du quiz
            function startQuiz(category) {
                currentCategory = category;
                // Sélectionner un quiz aléatoire dans la catégorie
                const categoryQuizzes = quizData[category];
                const randomIndex = Math.floor(Math.random() * categoryQuizzes.length);
                currentQuiz = categoryQuizzes[randomIndex].questions;
                
                currentQuestionIndex = 0;
                userScore = 0;
                userAnswers = new Array(currentQuiz.length).fill(null);

                quizSelection.style.display = 'none';
                quizInterface.style.display = 'block';
                quizResults.style.display = 'none';

                totalQuestionsEl.textContent = currentQuiz.length;
                currentScoreEl.textContent = userScore;

                displayQuestion();
                startTimer();
            }

            function displayQuestion() {
                const question = currentQuiz[currentQuestionIndex];
                questionText.textContent = question.question;

                // Afficher une icône représentative selon la catégorie
                questionImage.innerHTML = `<i class="fas fa-${getCategoryIcon()}"></i>`;

                // Mettre à jour les options
                optionsContainer.innerHTML = '';
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.setAttribute('data-option', index + 1);

                    const optionLetter = document.createElement('div');
                    optionLetter.className = 'option-letter';
                    optionLetter.textContent = String.fromCharCode(65 + index); // A, B, C, D

                    const optionText = document.createElement('div');
                    optionText.className = 'option-text';
                    optionText.textContent = option;

                    optionElement.appendChild(optionLetter);
                    optionElement.appendChild(optionText);

                    // Si l'utilisateur a déjà répondu à cette question
                    if (userAnswers[currentQuestionIndex] === index + 1) {
                        optionElement.classList.add('selected');
                        if (index + 1 === question.correctAnswer) {
                            optionElement.classList.add('correct');
                        } else {
                            optionElement.classList.add('incorrect');
                        }
                    }

                    optionsContainer.appendChild(optionElement);
                });

                // Mettre à jour la progression
                currentQuestionEl.textContent = currentQuestionIndex + 1;
                progressFill.style.width = `${((currentQuestionIndex + 1) / currentQuiz.length) * 100}%`;

                // Gérer les boutons de navigation
                prevBtn.disabled = currentQuestionIndex === 0;

                if (currentQuestionIndex === currentQuiz.length - 1) {
                    nextBtn.style.display = 'none';
                    submitBtn.style.display = 'block';
                } else {
                    nextBtn.style.display = 'block';
                    submitBtn.style.display = 'none';
                }
            }

            function getCategoryIcon() {
                switch (currentCategory) {
                    case 'math':
                        return 'calculator';
                    case 'french':
                        return 'book';
                    case 'science':
                        return 'flask';
                    case 'history':
                        return 'landmark';
                    default:
                        return 'question';
                }
            }

            optionsContainer.addEventListener('click', (e) => {
                const optionElement = e.target.closest('.option');
                if (optionElement) {
                    selectOption(optionElement);
                }
            });

            function selectOption(optionElement) {
                // Si l'utilisateur a déjà répondu à cette question, on ne fait rien
                if (userAnswers[currentQuestionIndex] !== null) return;

                // Enlever la sélection précédente
                const options = document.querySelectorAll('.option');
                options.forEach(opt => opt.classList.remove('selected'));

                // Sélectionner l'option cliquée
                optionElement.classList.add('selected');

                // Enregistrer la réponse de l'utilisateur
                const selectedOption = parseInt(optionElement.getAttribute('data-option'));
                userAnswers[currentQuestionIndex] = selectedOption;

                // Vérifier si la réponse est correcte
                const question = currentQuiz[currentQuestionIndex];
                if (selectedOption === question.correctAnswer) {
                    userScore++;
                    currentScoreEl.textContent = userScore;
                    optionElement.classList.add('correct');
                } else {
                    optionElement.classList.add('incorrect');
                    // Afficher la bonne réponse
                    options.forEach(opt => {
                        if (parseInt(opt.getAttribute('data-option')) === question.correctAnswer) {
                            opt.classList.add('correct');
                        }
                    });
                }

                // Désactiver les options après sélection
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
            }

            function goToPreviousQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    displayQuestion();
                }
            }

            function goToNextQuestion() {
                if (currentQuestionIndex < currentQuiz.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                }
            }

            function startTimer() {
                clearInterval(timerInterval);
                timeLeft = 60;
                updateTimerDisplay();

                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();

                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        submitQuiz();
                    }
                }, 1000);
            }

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timeLeftEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 10) {
                    timeLeftEl.classList.add('timer-critical');
                } else {
                    timeLeftEl.classList.remove('timer-critical');
                }
            }

            function submitQuiz() {
                clearInterval(timerInterval);

                // Calculer le score final
                const finalScore = Math.round((userScore / currentQuiz.length) * 100);

                // Afficher les résultats
                quizInterface.style.display = 'none';
                quizResults.style.display = 'block';

                // Mettre à jour l'interface des résultats
                document.querySelector('.result-score').textContent = `${finalScore}%`;

                // Changer l'icône en fonction du score
                const resultIcon = document.querySelector('.result-icon');
                resultIcon.className = 'result-icon ';
                if (finalScore >= 90) {
                    resultIcon.classList.add('excellent');
                    resultIcon.innerHTML = '<i class="fas fa-trophy"></i>';
                    document.querySelector('.result-title').textContent = 'Excellent !';
                    document.querySelector('.quiz-results p').textContent = 'Vous maîtrisez parfaitement ce sujet !';
                } else if (finalScore >= 70) {
                    resultIcon.classList.add('good');
                    resultIcon.innerHTML = '<i class="fas fa-star"></i>';
                    document.querySelector('.result-title').textContent = 'Très bien !';
                    document.querySelector('.quiz-results p').textContent = 'Vous avez une bonne connaissance de ce sujet.';
                } else if (finalScore >= 50) {
                    resultIcon.classList.add('average');
                    resultIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
                    document.querySelector('.result-title').textContent = 'Pas mal !';
                    document.querySelector('.quiz-results p').textContent = 'Continuez à vous améliorer.';
                } else {
                    resultIcon.classList.add('poor');
                    resultIcon.innerHTML = '<i class="fas fa-redo"></i>';
                    document.querySelector('.result-title').textContent = 'À améliorer';
                    document.querySelector('.quiz-results p').textContent = 'Avec un peu plus de pratique, vous progresserez !';
                }

                // Mettre à jour les statistiques
                document.querySelector('.stat-value:nth-child(1)').textContent = `${userScore}/${currentQuiz.length}`;
                const timeSpent = 60 - timeLeft;
                document.querySelector('.stat-value:nth-child(2)').textContent = `00:${timeSpent.toString().padStart(2, '0')}`;
                document.querySelector('.stat-value:nth-child(3)').textContent = `${finalScore}%`;
            }

            // Fonctions d'administration
            function refreshAdminData() {
                loadQuizTable();
            }

            function loadQuizTable() {
                quizTableBody.innerHTML = '';

                let quizIdCounter = 1;
                for (const category in quizData) {
                    quizData[category].forEach(quiz => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${quizIdCounter}</td>
                            <td>${getCategoryName(category)}</td>
                            <td>${quiz.title}</td>
                            <td>${quiz.questions.length}</td>
                            <td>${getDifficultyText(quiz.difficulty)}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit-btn" data-category="${category}" data-id="${quiz.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="action-btn delete-btn" data-category="${category}" data-id="${quiz.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        `;
                        quizTableBody.appendChild(row);
                        quizIdCounter++;
                    });
                }

                // Ajouter les écouteurs d'événements pour les boutons d'action
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const category = this.getAttribute('data-category');
                        const id = parseInt(this.getAttribute('data-id'));
                        editQuiz(category, id);
                    });
                });

                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const category = this.getAttribute('data-category');
                        const id = parseInt(this.getAttribute('data-id'));
                        deleteQuiz(category, id);
                    });
                });
            }

            function getCategoryName(category) {
                switch(category) {
                    case 'math': return 'Mathématiques';
                    case 'french': return 'Français';
                    case 'science': return 'Sciences';
                    case 'history': return 'Histoire-Géographie';
                    default: return 'Inconnu';
                }
            }

            function showQuizForm() {
                isEditingQuiz = false;
                editingQuizId = null;
                document.getElementById('form-title').textContent = 'Ajouter un Quiz';
                quizForm.style.display = 'block';
                resetQuizForm();
            }

            function hideQuizForm() {
                quizForm.style.display = 'none';
            }

            function resetQuizForm() {
                document.getElementById('quiz-category').value = 'math';
                document.getElementById('quiz-title').value = '';
                document.getElementById('quiz-difficulty').value = 'easy';
                questionsContainer.innerHTML = '';
                // Ajouter une question par défaut
                addQuestionForm();
            }

            function addQuestionForm() {
                const questionIndex = questionsContainer.children.length;
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-form';
                questionDiv.innerHTML = `
                    <div class="form-group">
                        <label class="form-label">Question ${questionIndex + 1}</label>
                        <textarea class="form-textarea question-text-input" placeholder="Entrez la question"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Options</label>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option A">
                            <input type="text" class="form-input option-input" placeholder="Option B">
                        </div>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option C">
                            <input type="text" class="form-input option-input" placeholder="Option D">
                        </div>
                        <div class="correct-option">
                            <label class="form-label">Réponse correcte:</label>
                            <select class="form-select correct-answer-select">
                                <option value="1">A</option>
                                <option value="2">B</option>
                                <option value="3">C</option>
                                <option value="4">D</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="admin-btn delete-question-btn" style="background: var(--incorrect-color);">
                        <i class="fas fa-trash"></i> Supprimer cette question
                    </button>
                    <hr>
                `;

                questionsContainer.appendChild(questionDiv);

                // Ajouter l'écouteur d'événement pour le bouton de suppression
                const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                deleteBtn.addEventListener('click', function() {
                    questionsContainer.removeChild(questionDiv);
                    // Renumérotez les questions
                    const questions = questionsContainer.querySelectorAll('.question-form');
                    questions.forEach((q, index) => {
                        q.querySelector('.form-label').textContent = `Question ${index + 1}`;
                    });
                });
            }

            function editQuiz(category, id) {
                isEditingQuiz = true;
                editingQuizId = id;
                document.getElementById('form-title').textContent = 'Modifier le Quiz';
                quizForm.style.display = 'block';

                const quiz = quizData[category].find(q => q.id === id);
                if (quiz) {
                    document.getElementById('quiz-category').value = category;
                    document.getElementById('quiz-title').value = quiz.title;
                    document.getElementById('quiz-difficulty').value = quiz.difficulty;

                    // Charger les questions
                    questionsContainer.innerHTML = '';
                    quiz.questions.forEach((question, index) => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'question-form';
                        questionDiv.innerHTML = `
                            <div class="form-group">
                                <label class="form-label">Question ${index + 1}</label>
                                <textarea class="form-textarea question-text-input" placeholder="Entrez la question">${question.question}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Options</label>
                                <div class="option-input-group">
                                    <input type="text" class="form-input option-input" placeholder="Option A" value="${question.options[0]}">
                                    <input type="text" class="form-input option-input" placeholder="Option B" value="${question.options[1]}">
                                </div>
                                <div class="option-input-group">
                                    <input type="text" class="form-input option-input" placeholder="Option C" value="${question.options[2]}">
                                    <input type="text" class="form-input option-input" placeholder="Option D" value="${question.options[3]}">
                                </div>
                                <div class="correct-option">
                                    <label class="form-label">Réponse correcte:</label>
                                    <select class="form-select correct-answer-select">
                                        <option value="1" ${question.correctAnswer === 1 ? 'selected' : ''}>A</option>
                                        <option value="2" ${question.correctAnswer === 2 ? 'selected' : ''}>B</option>
                                        <option value="3" ${question.correctAnswer === 3 ? 'selected' : ''}>C</option>
                                        <option value="4" ${question.correctAnswer === 4 ? 'selected' : ''}>D</option>
                                    </select>
                                </div>
                            </div>
                            <button type="button" class="admin-btn delete-question-btn" style="background: var(--incorrect-color);">
                                <i class="fas fa-trash"></i> Supprimer cette question
                            </button>
                            <hr>
                        `;

                        questionsContainer.appendChild(questionDiv);

                        // Ajouter l'écouteur d'événement pour le bouton de suppression
                        const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                        deleteBtn.addEventListener('click', function() {
                            questionsContainer.removeChild(questionDiv);
                            // Renumérotez les questions
                            const questions = questionsContainer.querySelectorAll('.question-form');
                            questions.forEach((q, idx) => {
                                q.querySelector('.form-label').textContent = `Question ${idx + 1}`;
                            });
                        });
                    });
                }
            }

            function deleteQuiz(category, id) {
                if (confirm('Êtes-vous sûr de vouloir supprimer ce quiz ?')) {
                    quizData[category] = quizData[category].filter(q => q.id !== id);
                    saveQuizData();
                    refreshAdminData();
                }
            }

            function saveQuiz() {
                const category = document.getElementById('quiz-category').value;
                const title = document.getElementById('quiz-title').value;
                const difficulty = document.getElementById('quiz-difficulty').value;

                if (!title) {
                    alert('Veuillez entrer un titre pour le quiz.');
                    return;
                }

                // Récupérer les questions
                const questionForms = questionsContainer.querySelectorAll('.question-form');
                if (questionForms.length === 0) {
                    alert('Veuillez ajouter au moins une question.');
                    return;
                }

                const questions = [];
                questionForms.forEach(form => {
                    const questionText = form.querySelector('.question-text-input').value;
                    const optionInputs = form.querySelectorAll('.option-input');
                    const correctAnswer = parseInt(form.querySelector('.correct-answer-select').value);

                    if (!questionText) {
                        alert('Veuillez remplir toutes les questions.');
                        return;
                    }

                    const options = Array.from(optionInputs).map(input => input.value);
                    if (options.some(opt => !opt)) {
                        alert('Veuillez remplir toutes les options pour chaque question.');
                        return;
                    }

                    questions.push({
                        question: questionText,
                        options: options,
                        correctAnswer: correctAnswer,
                        image: category
                    });
                });

                if (isEditingQuiz) {
                    // Mettre à jour le quiz existant
                    const quizIndex = quizData[category].findIndex(q => q.id === editingQuizId);
                    if (quizIndex !== -1) {
                        quizData[category][quizIndex].title = title;
                        quizData[category][quizIndex].difficulty = difficulty;
                        quizData[category][quizIndex].questions = questions;
                    }
                } else {
                    // Ajouter un nouveau quiz
                    const newId = getNextQuizId();
                    quizData[category].push({
                        id: newId,
                        title: title,
                        difficulty: difficulty,
                        questions: questions
                    });
                }

                saveQuizData();
                hideQuizForm();
                refreshAdminData();
                alert('Quiz enregistré avec succès !');
            }

            function getNextQuizId() {
                let maxId = 0;
                for (const category in quizData) {
                    quizData[category].forEach(quiz => {
                        if (quiz.id > maxId) {
                            maxId = quiz.id;
                        }
                    });
                }
                return maxId + 1;
            }

            function saveQuizData() {
                localStorage.setItem('quizData', JSON.stringify(quizData));
            }
        });
    </script>
</body>

</html>