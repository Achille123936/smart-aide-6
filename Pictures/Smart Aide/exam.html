<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulation d'Examen - EduBot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #7209b7;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --correct-color: #4ade80;
            --incorrect-color: #f87171;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 95%;
            max-width: 1200px;
            background-color: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .nav-tab {
            padding: 8px 16px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .nav-tab:hover, .nav-tab.active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            transition: var(--transition);
        }
        
        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateX(-5px);
        }
        
        .back-button i {
            margin-right: 8px;
        }
        
        .exam-content {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .exam-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-color);
        }
        
        .exam-title h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .exam-title p {
            color: #6c757d;
            font-size: 1.1rem;
        }
        
        .exams-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .exam-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }
        
        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .exam-name {
            font-size: 1.3rem;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        .exam-difficulty {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .difficulty-easy {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .difficulty-medium {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .difficulty-hard {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .exam-content-card {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .exam-description {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .exam-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .exam-duration {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .exam-questions {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .exam-subject {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .exam-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .exam-btn {
            padding: 8px 16px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .exam-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .exam-btn.secondary {
            background: #6c757d;
        }
        
        /* Interface de simulation d'examen */
        .exam-interface {
            display: none;
        }
        
        .exam-header-interface {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .exam-progress-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-text {
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .exam-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .timer-critical {
            color: var(--incorrect-color);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .exam-score {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .exam-instructions {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .instructions-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .instructions-list {
            padding-left: 20px;
            margin-bottom: 20px;
        }
        
        .instructions-list li {
            margin-bottom: 8px;
            color: #6c757d;
        }
        
        .question-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-color);
            line-height: 1.5;
        }
        
        .question-image {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 3rem;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .option {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            background-color: #f8f9ff;
        }
        
        .option.selected {
            border-color: var(--primary-color);
            background-color: #e6f2ff;
        }
        
        .option.correct {
            border-color: var(--correct-color);
            background-color: #f0fdf4;
        }
        
        .option.incorrect {
            border-color: var(--incorrect-color);
            background-color: #fef2f2;
        }
        
        .option-letter {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option.selected .option-letter {
            background: var(--primary-color);
            color: white;
        }
        
        .option.correct .option-letter {
            background: var(--correct-color);
            color: white;
        }
        
        .option.incorrect .option-letter {
            background: var(--incorrect-color);
            color: white;
        }
        
        .exam-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .exam-btn-large {
            padding: 12px 25px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .exam-btn-large:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .exam-btn-large:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Résultats de l'examen */
        .exam-results {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .result-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: white;
        }
        
        .excellent {
            background: linear-gradient(45deg, var(--correct-color), #16a34a);
        }
        
        .good {
            background: linear-gradient(45deg, #4cc9f0, #3b82f6);
        }
        
        .average {
            background: linear-gradient(45deg, #f59e0b, #f97316);
        }
        
        .poor {
            background: linear-gradient(45deg, var(--incorrect-color), #dc2626);
        }
        
        .result-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .result-score {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .result-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .result-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .details-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .question-review {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .question-review:last-child {
            border-bottom: none;
        }
        
        .question-review.correct {
            border-left: 4px solid var(--correct-color);
        }
        
        .question-review.incorrect {
            border-left: 4px solid var(--incorrect-color);
        }
        
        .review-question {
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .review-answer {
            display: flex;
            gap: 10px;
            margin-bottom: 5px;
        }
        
        .review-label {
            font-weight: 500;
            min-width: 120px;
        }
        
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Interface d'administration */
        .admin-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .admin-actions {
            display: flex;
            gap: 10px;
        }
        
        .admin-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .admin-btn:hover {
            opacity: 0.9;
        }
        
        .admin-btn.delete {
            background: var(--incorrect-color);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .admin-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .admin-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 4px 8px;
            background: none;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .edit-btn {
            color: var(--primary-color);
        }
        
        .delete-btn {
            color: var(--incorrect-color);
        }
        
        .action-btn:hover {
            background-color: #f0f0f0;
        }
        
        /* Formulaire d'administration */
        .admin-form {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 20px;
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Connexion administrateur */
        .login-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--dark-color);
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .login-btn {
            padding: 12px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            opacity: 0.9;
        }
        
        .admin-actions-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .logout-btn {
            padding: 8px 16px;
            background: var(--incorrect-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .logout-btn:hover {
            opacity: 0.9;
        }
        
        .search-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .search-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .questions-container {
            margin-top: 20px;
        }
        
        .question-form {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .question-number {
            font-weight: 500;
        }
        
        .delete-question-btn {
            background: var(--incorrect-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
        }
        
        .option-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .option-input {
            flex: 1;
        }
        
        .correct-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .exams-container {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            .back-button {
                align-self: center;
            }
            .exam-header-interface {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .exam-controls {
                flex-direction: column;
                gap: 15px;
            }
            .result-stats {
                grid-template-columns: 1fr;
            }
            .result-actions {
                flex-direction: column;
            }
            .admin-table {
                display: block;
                overflow-x: auto;
            }
            .admin-actions-container {
                flex-direction: column;
                gap: 10px;
            }
            .exam-actions {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            .exam-btn {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div>
                <h1><i class="fas fa-graduation-cap"></i> EduBot Examens</h1>
                <div class="nav-tabs">
                    <a href="quiz.html" class="nav-tab">
                        <i class="fas fa-question-circle"></i> Quiz
                    </a>
                    <a href="exercises.html" class="nav-tab">
                        <i class="fas fa-pen-fancy"></i> Exercices
                    </a>
                    <a href="formulas.html" class="nav-tab">
                        <i class="fas fa-square-root-variable"></i> Formules
                    </a>
                    <a href="#" class="nav-tab active">
                        <i class="fas fa-graduation-cap"></i> Examens
                    </a>
                    <a href="#" class="nav-tab" id="admin-tab-btn">
                        <i class="fas fa-cog"></i> Administration
                    </a>
                </div>
            </div>
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Retour à l'Accueil
            </a>
        </div>

        <div class="exam-content">
            <!-- Section des examens -->
            <div class="tab-content active" id="exams-tab">
                <div class="exam-title">
                    <h1>Simulations d'Examen</h1>
                    <p>Testez vos connaissances avec ces examens complets et évaluez votre niveau</p>
                </div>

                <div class="search-container">
                    <input type="text" class="search-input" id="search-exams" placeholder="Rechercher un examen...">
                    <button class="exam-btn" id="search-btn">
                        <i class="fas fa-search"></i> Rechercher
                    </button>
                </div>

                <div class="exams-container" id="exams-container">
                    <!-- Les examens seront chargés dynamiquement -->
                </div>
            </div>

            <!-- Interface de simulation d'examen -->
            <div class="tab-content" id="exam-interface">
                <div class="exam-header-interface">
                    <div class="exam-progress-info">
                        <span class="progress-text">Question <span id="current-question">1</span>/<span id="total-questions">10</span></span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>
                    <div class="exam-timer" id="exam-timer">
                        <i class="fas fa-clock"></i>
                        <span id="time-left">60:00</span>
                    </div>
                    <div class="exam-score">
                        <i class="fas fa-star"></i>
                        <span>Score: <span id="current-score">0</span></span>
                    </div>
                </div>

                <div class="exam-instructions" id="exam-instructions">
                    <h3 class="instructions-title">Instructions pour l'examen</h3>
                    <ul class="instructions-list" id="instructions-list">
                        <!-- Les instructions seront chargées dynamiquement -->
                    </ul>
                    <button class="exam-btn-large" id="start-exam-btn">
                        <i class="fas fa-play"></i> Commencer l'examen
                    </button>
                </div>

                <div class="question-container" id="question-container" style="display: none;">
                    <h2 class="question-text" id="question-text">Chargement de la question...</h2>
                    <div class="question-image" id="question-image">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="options-container" id="options-container">
                        <!-- Les options seront chargées dynamiquement -->
                    </div>
                </div>

                <div class="exam-controls" id="exam-controls" style="display: none;">
                    <button class="exam-btn-large" id="prev-question-btn" disabled>
                        <i class="fas fa-arrow-left"></i> Précédent
                    </button>
                    <button class="exam-btn-large" id="next-question-btn">
                        Suivant <i class="fas fa-arrow-right"></i>
                    </button>
                    <button class="exam-btn-large" id="submit-exam-btn" style="display: none;">
                        <i class="fas fa-paper-plane"></i> Soumettre l'examen
                    </button>
                </div>
            </div>

            <!-- Résultats de l'examen -->
            <div class="tab-content" id="exam-results">
                <div class="result-icon excellent">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 class="result-title">Félicitations !</h2>
                <div class="result-score">85%</div>
                <p>Vous avez réussi cet examen ! Continuez à vous perfectionner.</p>

                <div class="result-stats">
                    <div class="result-stat">
                        <div class="stat-value">17/20</div>
                        <div class="stat-label">Réponses correctes</div>
                    </div>
                    <div class="result-stat">
                        <div class="stat-value">45:30</div>
                        <div class="stat-label">Temps passé</div>
                    </div>
                    <div class="result-stat">
                        <div class="stat-value">85%</div>
                        <div class="stat-label">Score final</div>
                    </div>
                </div>

                <div class="result-details">
                    <h3 class="details-title">Détail des résultats</h3>
                    <div id="questions-review">
                        <!-- Les questions avec réponses seront chargées dynamiquement -->
                    </div>
                </div>

                <div class="result-actions">
                    <button class="exam-btn-large" id="restart-exam-btn">
                        <i class="fas fa-redo"></i> Recommencer
                    </button>
                    <button class="exam-btn-large" id="new-exam-btn">
                        <i class="fas fa-list"></i> Nouvel Examen
                    </button>
                    <a href="index.html" class="exam-btn-large">
                        <i class="fas fa-home"></i> Accueil
                    </a>
                </div>
            </div>

            <!-- Interface d'administration -->
            <div class="tab-content" id="admin-tab">
                <div class="admin-container" id="admin-login-container">
                    <div class="login-title">
                        <h2>Connexion Administrateur</h2>
                        <p>Veuillez vous connecter pour accéder au panneau d'administration</p>
                    </div>
                    <div class="login-form">
                        <div class="form-group">
                            <label class="form-label" for="admin-username">Nom d'utilisateur</label>
                            <input type="text" class="form-input" id="admin-username" placeholder="Entrez votre nom d'utilisateur">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="admin-password">Mot de passe</label>
                            <input type="password" class="form-input" id="admin-password" placeholder="Entrez votre mot de passe">
                        </div>
                        <button class="login-btn" id="admin-login-btn">
                            <i class="fas fa-sign-in-alt"></i> Se connecter
                        </button>
                    </div>
                </div>

                <div class="admin-container" id="admin-panel" style="display: none;">
                    <div class="admin-actions-container">
                        <div>
                            <h2>Gestion des Examens</h2>
                            <p>Bienvenue, <span id="admin-name">Administrateur</span></p>
                        </div>
                        <button class="logout-btn" id="admin-logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Déconnexion
                        </button>
                    </div>

                    <div class="admin-actions">
                        <button class="admin-btn" id="add-exam-btn">
                            <i class="fas fa-plus"></i> Ajouter un Examen
                        </button>
                        <button class="admin-btn" id="refresh-exams-btn">
                            <i class="fas fa-sync-alt"></i> Actualiser
                        </button>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nom</th>
                                <th>Matière</th>
                                <th>Difficulté</th>
                                <th>Durée</th>
                                <th>Questions</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="exams-table-body">
                            <!-- Les examens seront chargés dynamiquement -->
                        </tbody>
                    </table>

                    <div class="admin-form" id="exam-form">
                        <h3 id="form-title">Ajouter un Examen</h3>
                        <div class="form-group">
                            <label class="form-label" for="exam-name">Nom de l'examen</label>
                            <input type="text" class="form-input" id="exam-name" placeholder="Entrez le nom de l'examen">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exam-subject">Matière</label>
                            <select class="form-select" id="exam-subject">
                                <option value="math">Mathématiques</option>
                                <option value="french">Français</option>
                                <option value="science">Sciences</option>
                                <option value="history">Histoire-Géographie</option>
                                <option value="english">Anglais</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exam-description">Description</label>
                            <textarea class="form-textarea" id="exam-description" placeholder="Décrivez l'examen"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exam-difficulty">Difficulté</label>
                            <select class="form-select" id="exam-difficulty">
                                <option value="easy">Facile</option>
                                <option value="medium">Moyen</option>
                                <option value="hard">Difficile</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exam-duration">Durée (en minutes)</label>
                            <input type="number" class="form-input" id="exam-duration" min="5" max="180" value="60">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="exam-instructions">Instructions</label>
                            <textarea class="form-textarea" id="exam-instructions" placeholder="Entrez les instructions pour l'examen"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Questions</label>
                            <div id="questions-container">
                                <!-- Les questions seront ajoutées dynamiquement -->
                            </div>
                            <button type="button" class="admin-btn" id="add-question-btn">
                                <i class="fas fa-plus"></i> Ajouter une Question
                            </button>
                        </div>
                        <div class="form-actions">
                            <button class="admin-btn" id="cancel-exam-btn">Annuler</button>
                            <button class="admin-btn" id="save-exam-btn">Enregistrer</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Éléments DOM
            const navTabs = document.querySelectorAll('.nav-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const examsContainer = document.getElementById('exams-container');
            const adminTabBtn = document.getElementById('admin-tab-btn');
            const adminLoginContainer = document.getElementById('admin-login-container');
            const adminPanel = document.getElementById('admin-panel');
            const adminLoginBtn = document.getElementById('admin-login-btn');
            const adminLogoutBtn = document.getElementById('admin-logout-btn');
            const adminName = document.getElementById('admin-name');
            const examsTableBody = document.getElementById('exams-table-body');
            const examForm = document.getElementById('exam-form');
            const addExamBtn = document.getElementById('add-exam-btn');
            const cancelExamBtn = document.getElementById('cancel-exam-btn');
            const saveExamBtn = document.getElementById('save-exam-btn');
            const addQuestionBtn = document.getElementById('add-question-btn');
            const questionsContainer = document.getElementById('questions-container');
            const refreshExamsBtn = document.getElementById('refresh-exams-btn');
            const searchExamsInput = document.getElementById('search-exams');
            const searchBtn = document.getElementById('search-btn');

            // Éléments de l'interface d'examen
            const currentQuestionEl = document.getElementById('current-question');
            const totalQuestionsEl = document.getElementById('total-questions');
            const progressFill = document.getElementById('progress-fill');
            const timeLeftEl = document.getElementById('time-left');
            const currentScoreEl = document.getElementById('current-score');
            const examInstructions = document.getElementById('exam-instructions');
            const instructionsList = document.getElementById('instructions-list');
            const startExamBtn = document.getElementById('start-exam-btn');
            const questionContainer = document.getElementById('question-container');
            const questionText = document.getElementById('question-text');
            const questionImage = document.getElementById('question-image');
            const optionsContainer = document.getElementById('options-container');
            const prevQuestionBtn = document.getElementById('prev-question-btn');
            const nextQuestionBtn = document.getElementById('next-question-btn');
            const submitExamBtn = document.getElementById('submit-exam-btn');
            const examControls = document.getElementById('exam-controls');
            const restartExamBtn = document.getElementById('restart-exam-btn');
            const newExamBtn = document.getElementById('new-exam-btn');
            const questionsReview = document.getElementById('questions-review');

            // Variables
            let isAdminLoggedIn = false;
            let isEditingExam = false;
            let editingExamId = null;
            let examsData = [];
            let currentExam = null;
            let currentQuestionIndex = 0;
            let userScore = 0;
            let timerInterval = null;
            let timeLeft = 0;
            let userAnswers = [];

            // Informations de connexion administrateur
            const adminCredentials = {
                username: "admin",
                password: "admin123"
            };

            // Initialisation
            initializeApp();

            // Fonctions d'initialisation
            function initializeApp() {
                loadExamsData();
                setupEventListeners();
                checkAdminLoginStatus();
                renderExams();
            }

            function setupEventListeners() {
                // Navigation par onglets
                navTabs.forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tabId = tab.getAttribute('data-tab') || tab.id.replace('-btn', '');
                        switchTab(tabId);
                    });
                });

                // Connexion administrateur
                adminLoginBtn.addEventListener('click', adminLogin);
                adminLogoutBtn.addEventListener('click', adminLogout);

                // Gestion des examens
                addExamBtn.addEventListener('click', showExamForm);
                cancelExamBtn.addEventListener('click', hideExamForm);
                saveExamBtn.addEventListener('click', saveExam);
                addQuestionBtn.addEventListener('click', addQuestionForm);
                refreshExamsBtn.addEventListener('click', refreshAdminData);

                // Recherche
                searchBtn.addEventListener('click', performSearch);
                searchExamsInput.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });

                // Interface d'examen
                startExamBtn.addEventListener('click', startExam);
                prevQuestionBtn.addEventListener('click', goToPreviousQuestion);
                nextQuestionBtn.addEventListener('click', goToNextQuestion);
                submitExamBtn.addEventListener('click', submitExam);
                restartExamBtn.addEventListener('click', () => startExam(currentExam.id));
                newExamBtn.addEventListener('click', () => {
                    switchTab('exams');
                });
                
                // Sélection d'options
                optionsContainer.addEventListener('click', (e) => {
                    const optionElement = e.target.closest('.option');
                    if (optionElement) {
                        selectOption(optionElement);
                    }
                });
            }

            function checkAdminLoginStatus() {
                const adminStatus = localStorage.getItem('adminLoggedIn');
                if (adminStatus === 'true') {
                    isAdminLoggedIn = true;
                    showAdminPanel();
                }
            }

            function switchTab(tabId) {
                // Mettre à jour les onglets actifs
                navTabs.forEach(tab => {
                    if (tab.getAttribute('data-tab') === tabId || tab.id === `${tabId}-btn`) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });

                // Afficher le contenu de l'onglet sélectionné
                tabContents.forEach(content => {
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });

                // Si on passe à l'onglet d'administration et que l'admin n'est pas connecté
                if (tabId === 'admin' && !isAdminLoggedIn) {
                    adminLoginContainer.style.display = 'block';
                    adminPanel.style.display = 'none';
                } else if (tabId === 'admin' && isAdminLoggedIn) {
                    adminLoginContainer.style.display = 'none';
                    adminPanel.style.display = 'block';
                    refreshAdminData();
                }
            }

            function loadExamsData() {
                const savedExams = localStorage.getItem('examsData');
                if (savedExams) {
                    examsData = JSON.parse(savedExams);
                } else {
                    // Données par défaut
                    examsData = [
                        {
                            id: 1,
                            name: 'Examen de Mathématiques - Niveau 1',
                            subject: 'math',
                            difficulty: 'medium',
                            description: 'Examen complet de mathématiques couvrant l\'algèbre, la géométrie et les probabilités.',
                            duration: 60,
                            instructions: [
                                'Cet examen comporte 20 questions à choix multiples.',
                                'Vous avez 60 minutes pour compléter l\'examen.',
                                'Chaque question a une seule réponse correcte.',
                                'Votre score sera calculé sur la base des réponses correctes.',
                                'Vous ne pouvez pas revenir en arrière après avoir soumis l\'examen.'
                            ],
                            questions: [
                                {
                                    question: 'Quelle est la valeur de π arrondie à deux décimales ?',
                                    options: ['3.14', '3.16', '3.12', '3.18'],
                                    correctAnswer: 1
                                },
                                {
                                    question: 'Si x + 5 = 12, quelle est la valeur de x ?',
                                    options: ['5', '6', '7', '8'],
                                    correctAnswer: 3
                                },
                                {
                                    question: 'Quelle est la racine carrée de 64 ?',
                                    options: ['6', '7', '8', '9'],
                                    correctAnswer: 3
                                }
                            ]
                        },
                        {
                            id: 2,
                            name: 'Examen de Français - Grammaire',
                            subject: 'french',
                            difficulty: 'easy',
                            description: 'Testez vos connaissances en grammaire française avec cet examen.',
                            duration: 45,
                            instructions: [
                                'Cet examen comporte 15 questions à choix multiples.',
                                'Vous avez 45 minutes pour compléter l\'examen.',
                                'Chaque question a une seule réponse correcte.',
                                'Votre score sera calculé sur la base des réponses correctes.',
                                'Vous ne pouvez pas revenir en arrière après avoir soumis l\'examen.'
                            ],
                            questions: [
                                {
                                    question: 'Quel est le participe passé du verbe "avoir" ?',
                                    options: ['avé', 'avu', 'eu', 'avue'],
                                    correctAnswer: 3
                                },
                                {
                                    question: 'Quel mot est correctement orthographié ?',
                                    options: ['Accueil', 'Aceuil', 'Accueille', 'Acueil'],
                                    correctAnswer: 1
                                }
                            ]
                        },
                        {
                            id: 3,
                            name: 'Examen de Sciences - Physique et Chimie',
                            subject: 'science',
                            difficulty: 'hard',
                            description: 'Évaluez vos connaissances en physique et chimie avec cet examen avancé.',
                            duration: 90,
                            instructions: [
                                'Cet examen comporte 25 questions à choix multiples.',
                                'Vous avez 90 minutes pour compléter l\'examen.',
                                'Chaque question a une seule réponse correcte.',
                                'Votre score sera calculé sur la base des réponses correctes.',
                                'Vous ne pouvez pas revenir en arrière après avoir soumis l\'examen.'
                            ],
                            questions: [
                                {
                                    question: 'Quel gaz les plantes absorbent-elles pendant la photosynthèse ?',
                                    options: ['Oxygène', 'Azote', 'Dioxyde de carbone', 'Hydrogène'],
                                    correctAnswer: 3
                                },
                                {
                                    question: 'Quel est l\'élément chimique le plus abondant dans l\'univers ?',
                                    options: ['Oxygène', 'Carbone', 'Hydrogène', 'Hélium'],
                                    correctAnswer: 3
                                }
                            ]
                        }
                    ];
                    saveExamsData();
                }
            }

            function saveExamsData() {
                localStorage.setItem('examsData', JSON.stringify(examsData));
            }

            function renderExams() {
                examsContainer.innerHTML = '';

                let filteredExams = examsData;

                // Filtrer par recherche
                const searchTerm = searchExamsInput.value.toLowerCase();
                if (searchTerm) {
                    filteredExams = filteredExams.filter(exam => 
                        exam.name.toLowerCase().includes(searchTerm) || 
                        exam.description.toLowerCase().includes(searchTerm)
                    );
                }

                if (filteredExams.length === 0) {
                    examsContainer.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #6c757d;">
                            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 15px;"></i>
                            <h3>Aucun examen trouvé</h3>
                            <p>Essayez de modifier vos critères de recherche ou d'ajouter de nouveaux examens.</p>
                        </div>
                    `;
                    return;
                }

                filteredExams.forEach(exam => {
                    const examElement = createExamCard(exam);
                    examsContainer.appendChild(examElement);
                });
            }

            function createExamCard(exam) {
                const examElement = document.createElement('div');
                examElement.className = 'exam-card';
                
                const difficultyClass = `difficulty-${exam.difficulty}`;
                const difficultyText = getDifficultyText(exam.difficulty);
                const subjectName = getSubjectName(exam.subject);
                const subjectIcon = getSubjectIcon(exam.subject);

                examElement.innerHTML = `
                    <div class="exam-header">
                        <div>
                            <h3 class="exam-name">${exam.name}</h3>
                            <span class="exam-difficulty ${difficultyClass}">${difficultyText}</span>
                        </div>
                    </div>
                    <div class="exam-content-card">
                        <p class="exam-description">${exam.description}</p>
                        <div class="exam-meta">
                            <span class="exam-subject"><i class="fas fa-${subjectIcon}"></i> ${subjectName}</span>
                            <span class="exam-duration"><i class="fas fa-clock"></i> ${exam.duration} min</span>
                            <span class="exam-questions"><i class="fas fa-list-ol"></i> ${exam.questions.length} questions</span>
                        </div>
                        <div class="exam-actions">
                            <button class="exam-btn secondary info-exam-btn" data-id="${exam.id}">
                                <i class="fas fa-info-circle"></i> Détails
                            </button>
                            <button class="exam-btn start-exam-btn" data-id="${exam.id}">
                                <i class="fas fa-play"></i> Commencer
                            </button>
                        </div>
                    </div>
                `;

                // Ajouter les écouteurs d'événements pour les boutons
                const infoBtn = examElement.querySelector('.info-exam-btn');
                infoBtn.addEventListener('click', function() {
                    const examId = parseInt(this.getAttribute('data-id'));
                    showExamDetails(examId);
                });

                const startBtn = examElement.querySelector('.start-exam-btn');
                startBtn.addEventListener('click', function() {
                    const examId = parseInt(this.getAttribute('data-id'));
                    showExamInstructions(examId);
                });

                return examElement;
            }

            function showExamDetails(examId) {
                const exam = examsData.find(e => e.id === examId);
                if (exam) {
                    const difficultyText = getDifficultyText(exam.difficulty);
                    const subjectName = getSubjectName(exam.subject);
                    
                    let instructionsHTML = '';
                    exam.instructions.forEach(instruction => {
                        instructionsHTML += `<li>${instruction}</li>`;
                    });
                    
                    let questionsHTML = '';
                    exam.questions.forEach((question, index) => {
                        questionsHTML += `<li>${index + 1}. ${question.question}</li>`;
                    });
                    
                    alert(`
                        Détails de l'examen: ${exam.name}
                        
                        Matière: ${subjectName}
                        Difficulté: ${difficultyText}
                        Durée: ${exam.duration} minutes
                        Nombre de questions: ${exam.questions.length}
                        
                        Description:
                        ${exam.description}
                        
                        Instructions:
                        ${instructionsHTML}
                    `);
                }
            }

            function showExamInstructions(examId) {
                currentExam = examsData.find(e => e.id === examId);
                if (!currentExam) return;
                
                switchTab('exam-interface');
                
                // Afficher les instructions
                instructionsList.innerHTML = '';
                currentExam.instructions.forEach(instruction => {
                    const li = document.createElement('li');
                    li.textContent = instruction;
                    instructionsList.appendChild(li);
                });
                
                // Afficher le bouton pour commencer
                examInstructions.style.display = 'block';
                questionContainer.style.display = 'none';
                examControls.style.display = 'none';
            }

            function startExam() {
                currentQuestionIndex = 0;
                userScore = 0;
                userAnswers = new Array(currentExam.questions.length).fill(null);
                timeLeft = currentExam.duration * 60; // Convertir en secondes
                
                examInstructions.style.display = 'none';
                questionContainer.style.display = 'block';
                examControls.style.display = 'flex';
                
                totalQuestionsEl.textContent = currentExam.questions.length;
                currentScoreEl.textContent = userScore;
                
                displayQuestion();
                startTimer();
            }

            function displayQuestion() {
                const question = currentExam.questions[currentQuestionIndex];
                questionText.textContent = question.question;

                // Afficher une icône représentative selon la matière
                questionImage.innerHTML = `<i class="fas fa-${getSubjectIcon(currentExam.subject)}"></i>`;

                // Mettre à jour les options
                optionsContainer.innerHTML = '';
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.setAttribute('data-option', index + 1);

                    const optionLetter = document.createElement('div');
                    optionLetter.className = 'option-letter';
                    optionLetter.textContent = String.fromCharCode(65 + index); // A, B, C, D

                    const optionText = document.createElement('div');
                    optionText.className = 'option-text';
                    optionText.textContent = option;

                    optionElement.appendChild(optionLetter);
                    optionElement.appendChild(optionText);

                    // Si l'utilisateur a déjà répondu à cette question
                    if (userAnswers[currentQuestionIndex] === index + 1) {
                        optionElement.classList.add('selected');
                    }

                    optionsContainer.appendChild(optionElement);
                });

                // Mettre à jour la progression
                currentQuestionEl.textContent = currentQuestionIndex + 1;
                progressFill.style.width = `${((currentQuestionIndex + 1) / currentExam.questions.length) * 100}%`;

                // Gérer les boutons de navigation
                prevQuestionBtn.disabled = currentQuestionIndex === 0;

                if (currentQuestionIndex === currentExam.questions.length - 1) {
                    nextQuestionBtn.style.display = 'none';
                    submitExamBtn.style.display = 'block';
                } else {
                    nextQuestionBtn.style.display = 'block';
                    submitExamBtn.style.display = 'none';
                }
            }

            function selectOption(optionElement) {
                // Enlever la sélection précédente
                const options = document.querySelectorAll('.option');
                options.forEach(opt => opt.classList.remove('selected'));

                // Sélectionner l'option cliquée
                optionElement.classList.add('selected');

                // Enregistrer la réponse de l'utilisateur
                const selectedOption = parseInt(optionElement.getAttribute('data-option'));
                userAnswers[currentQuestionIndex] = selectedOption;
            }

            function goToPreviousQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    displayQuestion();
                }
            }

            function goToNextQuestion() {
                if (currentQuestionIndex < currentExam.questions.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                }
            }

            function startTimer() {
                clearInterval(timerInterval);
                updateTimerDisplay();

                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();

                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        submitExam();
                    }
                }, 1000);
            }

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timeLeftEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 300) { // 5 minutes restantes
                    timeLeftEl.classList.add('timer-critical');
                } else {
                    timeLeftEl.classList.remove('timer-critical');
                }
            }

            function submitExam() {
                clearInterval(timerInterval);

                // Calculer le score
                userScore = 0;
                currentExam.questions.forEach((question, index) => {
                    if (userAnswers[index] === question.correctAnswer) {
                        userScore++;
                    }
                });

                // Calculer le score final en pourcentage
                const finalScore = Math.round((userScore / currentExam.questions.length) * 100);
                const timeSpent = (currentExam.duration * 60) - timeLeft;

                // Afficher les résultats
                switchTab('exam-results');

                // Mettre à jour l'interface des résultats
                document.querySelector('.result-score').textContent = `${finalScore}%`;

                // Changer l'icône en fonction du score
                const resultIcon = document.querySelector('.result-icon');
                resultIcon.className = 'result-icon ';
                if (finalScore >= 90) {
                    resultIcon.classList.add('excellent');
                    resultIcon.innerHTML = '<i class="fas fa-trophy"></i>';
                    document.querySelector('.result-title').textContent = 'Excellent !';
                    document.querySelector('.exam-results p').textContent = 'Vous avez excellé dans cet examen !';
                } else if (finalScore >= 70) {
                    resultIcon.classList.add('good');
                    resultIcon.innerHTML = '<i class="fas fa-star"></i>';
                    document.querySelector('.result-title').textContent = 'Très bien !';
                    document.querySelector('.exam-results p').textContent = 'Vous avez une bonne maîtrise du sujet.';
                } else if (finalScore >= 50) {
                    resultIcon.classList.add('average');
                    resultIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
                    document.querySelector('.result-title').textContent = 'Passable';
                    document.querySelector('.exam-results p').textContent = 'Vous avez des bases mais pouvez vous améliorer.';
                } else {
                    resultIcon.classList.add('poor');
                    resultIcon.innerHTML = '<i class="fas fa-redo"></i>';
                    document.querySelector('.result-title').textContent = 'À revoir';
                    document.querySelector('.exam-results p').textContent = 'Nous vous recommandons de revoir les concepts.';
                }

                // Mettre à jour les statistiques
                const minutesSpent = Math.floor(timeSpent / 60);
                const secondsSpent = timeSpent % 60;

                document.querySelector('.stat-value:nth-child(1)').textContent = `${userScore}/${currentExam.questions.length}`;
                document.querySelector('.stat-value:nth-child(2)').textContent = `${minutesSpent.toString().padStart(2, '0')}:${secondsSpent.toString().padStart(2, '0')}`;
                document.querySelector('.stat-value:nth-child(3)').textContent = `${finalScore}%`;

                // Afficher le détail des questions
                displayQuestionsReview();
            }

            function displayQuestionsReview() {
                questionsReview.innerHTML = '';
                
                currentExam.questions.forEach((question, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = userAnswer === question.correctAnswer;
                    
                    const questionReview = document.createElement('div');
                    questionReview.className = `question-review ${isCorrect ? 'correct' : 'incorrect'}`;
                    
                    let optionsHTML = '';
                    question.options.forEach((option, optIndex) => {
                        const isUserAnswer = (optIndex + 1) === userAnswer;
                        const isCorrectAnswer = (optIndex + 1) === question.correctAnswer;
                        
                        let optionClass = '';
                        if (isUserAnswer && isCorrectAnswer) {
                            optionClass = 'correct';
                        } else if (isUserAnswer && !isCorrectAnswer) {
                            optionClass = 'incorrect';
                        } else if (isCorrectAnswer) {
                            optionClass = 'correct';
                        }
                        
                        optionsHTML += `
                            <div class="review-answer">
                                <span class="review-label">${String.fromCharCode(65 + optIndex)}:</span>
                                <span class="${optionClass}">${option} ${isCorrectAnswer ? '✓' : (isUserAnswer ? '✗' : '')}</span>
                            </div>
                        `;
                    });
                    
                    questionReview.innerHTML = `
                        <div class="review-question">${index + 1}. ${question.question}</div>
                        ${optionsHTML}
                    `;
                    
                    questionsReview.appendChild(questionReview);
                });
            }

            function getDifficultyText(difficulty) {
                switch(difficulty) {
                    case 'easy': return 'Facile';
                    case 'medium': return 'Moyen';
                    case 'hard': return 'Difficile';
                    default: return 'Inconnu';
                }
            }

            function getSubjectName(subject) {
                switch(subject) {
                    case 'math': return 'Mathématiques';
                    case 'french': return 'Français';
                    case 'science': return 'Sciences';
                    case 'history': return 'Histoire-Géographie';
                    case 'english': return 'Anglais';
                    default: return 'Autre';
                }
            }

            function getSubjectIcon(subject) {
                switch(subject) {
                    case 'math': return 'calculator';
                    case 'french': return 'book';
                    case 'science': return 'flask';
                    case 'history': return 'landmark';
                    case 'english': return 'language';
                    default: return 'question';
                }
            }

            function performSearch() {
                renderExams();
            }

            // Fonctions d'administration
            function adminLogin() {
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    isAdminLoggedIn = true;
                    localStorage.setItem('adminLoggedIn', 'true');
                    showAdminPanel();
                    alert('Connexion réussie !');
                } else {
                    alert('Nom d\'utilisateur ou mot de passe incorrect.');
                }
            }
            
            function adminLogout() {
                isAdminLoggedIn = false;
                localStorage.removeItem('adminLoggedIn');
                adminLoginContainer.style.display = 'block';
                adminPanel.style.display = 'none';
                document.getElementById('admin-username').value = '';
                document.getElementById('admin-password').value = '';
                alert('Déconnexion réussie.');
            }
            
            function showAdminPanel() {
                adminLoginContainer.style.display = 'none';
                adminPanel.style.display = 'block';
                adminName.textContent = 'Administrateur';
                refreshAdminData();
            }
            
            function refreshAdminData() {
                loadExamsTable();
            }
            
            function loadExamsTable() {
                examsTableBody.innerHTML = '';
                
                examsData.forEach(exam => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${exam.id}</td>
                        <td>${exam.name}</td>
                        <td>${getSubjectName(exam.subject)}</td>
                        <td>${getDifficultyText(exam.difficulty)}</td>
                        <td>${exam.duration} min</td>
                        <td>${exam.questions.length}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn edit-btn" data-id="${exam.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete-btn" data-id="${exam.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    examsTableBody.appendChild(row);
                });
                
                // Ajouter les écouteurs d'événements pour les boutons d'action
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        editExam(id);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        deleteExam(id);
                    });
                });
            }
            
            function showExamForm() {
                isEditingExam = false;
                editingExamId = null;
                document.getElementById('form-title').textContent = 'Ajouter un Examen';
                examForm.style.display = 'block';
                resetExamForm();
            }
            
            function hideExamForm() {
                examForm.style.display = 'none';
            }
            
            function resetExamForm() {
                document.getElementById('exam-name').value = '';
                document.getElementById('exam-subject').value = 'math';
                document.getElementById('exam-description').value = '';
                document.getElementById('exam-difficulty').value = 'medium';
                document.getElementById('exam-duration').value = '60';
                document.getElementById('exam-instructions').value = '';
                questionsContainer.innerHTML = '';
                // Ajouter une question par défaut
                addQuestionForm();
            }
            
            function addQuestionForm() {
                const questionIndex = questionsContainer.children.length;
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-form';
                
                questionDiv.innerHTML = `
                    <div class="question-header">
                        <span class="question-number">Question ${questionIndex + 1}</span>
                        <button type="button" class="delete-question-btn">
                            <i class="fas fa-trash"></i> Supprimer
                        </button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Question</label>
                        <textarea class="form-textarea question-text-input" placeholder="Entrez la question"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Options</label>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option A">
                            <input type="text" class="form-input option-input" placeholder="Option B">
                        </div>
                        <div class="option-input-group">
                            <input type="text" class="form-input option-input" placeholder="Option C">
                            <input type="text" class="form-input option-input" placeholder="Option D">
                        </div>
                        <div class="correct-option">
                            <label class="form-label">Réponse correcte:</label>
                            <select class="form-select correct-answer-select">
                                <option value="1">A</option>
                                <option value="2">B</option>
                                <option value="3">C</option>
                                <option value="4">D</option>
                            </select>
                        </div>
                    </div>
                `;
                
                questionsContainer.appendChild(questionDiv);
                
                // Ajouter l'écouteur d'événement pour le bouton de suppression
                const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                deleteBtn.addEventListener('click', function() {
                    questionsContainer.removeChild(questionDiv);
                    // Renumérotez les questions
                    const questions = questionsContainer.querySelectorAll('.question-form');
                    questions.forEach((q, index) => {
                        q.querySelector('.question-number').textContent = `Question ${index + 1}`;
                    });
                });
            }
            
            function editExam(id) {
                isEditingExam = true;
                editingExamId = id;
                document.getElementById('form-title').textContent = 'Modifier l\'Examen';
                examForm.style.display = 'block';
                
                const exam = examsData.find(e => e.id === id);
                if (exam) {
                    document.getElementById('exam-name').value = exam.name;
                    document.getElementById('exam-subject').value = exam.subject;
                    document.getElementById('exam-description').value = exam.description;
                    document.getElementById('exam-difficulty').value = exam.difficulty;
                    document.getElementById('exam-duration').value = exam.duration;
                    document.getElementById('exam-instructions').value = exam.instructions.join('\n');
                    
                    // Charger les questions
                    questionsContainer.innerHTML = '';
                    exam.questions.forEach((question, index) => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'question-form';
                        
                        questionDiv.innerHTML = `
                            <div class="question-header">
                                <span class="question-number">Question ${index + 1}</span>
                                <button type="button" class="delete-question-btn">
                                    <i class="fas fa-trash"></i> Supprimer
                                </button>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Question</label>
                                <textarea class="form-textarea question-text-input" placeholder="Entrez la question">${question.question}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Options</label>
                                <div class="option-input-group">
                                    <input type="text" class="form-input option-input" placeholder="Option A" value="${question.options[0]}">
                                    <input type="text" class="form-input option-input" placeholder="Option B" value="${question.options[1]}">
                                </div>
                                <div class="option-input-group">
                                    <input type="text" class="form-input option-input" placeholder="Option C" value="${question.options[2]}">
                                    <input type="text" class="form-input option-input" placeholder="Option D" value="${question.options[3]}">
                                </div>
                                <div class="correct-option">
                                    <label class="form-label">Réponse correcte:</label>
                                    <select class="form-select correct-answer-select">
                                        <option value="1" ${question.correctAnswer === 1 ? 'selected' : ''}>A</option>
                                        <option value="2" ${question.correctAnswer === 2 ? 'selected' : ''}>B</option>
                                        <option value="3" ${question.correctAnswer === 3 ? 'selected' : ''}>C</option>
                                        <option value="4" ${question.correctAnswer === 4 ? 'selected' : ''}>D</option>
                                    </select>
                                </div>
                            </div>
                        `;
                        
                        questionsContainer.appendChild(questionDiv);
                        
                        // Ajouter l'écouteur d'événement pour le bouton de suppression
                        const deleteBtn = questionDiv.querySelector('.delete-question-btn');
                        deleteBtn.addEventListener('click', function() {
                            questionsContainer.removeChild(questionDiv);
                            // Renumérotez les questions
                            const questions = questionsContainer.querySelectorAll('.question-form');
                            questions.forEach((q, idx) => {
                                q.querySelector('.question-number').textContent = `Question ${idx + 1}`;
                            });
                        });
                    });
                }
            }
            
            function deleteExam(id) {
                if (confirm('Êtes-vous sûr de vouloir supprimer cet examen ?')) {
                    examsData = examsData.filter(e => e.id !== id);
                    saveExamsData();
                    refreshAdminData();
                    renderExams();
                }
            }
            
            function saveExam() {
                const name = document.getElementById('exam-name').value;
                const subject = document.getElementById('exam-subject').value;
                const description = document.getElementById('exam-description').value;
                const difficulty = document.getElementById('exam-difficulty').value;
                const duration = parseInt(document.getElementById('exam-duration').value);
                const instructionsText = document.getElementById('exam-instructions').value;
                
                if (!name || !description || !instructionsText) {
                    alert('Veuillez remplir tous les champs obligatoires.');
                    return;
                }
                
                // Récupérer les instructions (une par ligne)
                const instructions = instructionsText.split('\n').filter(line => line.trim() !== '');
                
                // Récupérer les questions
                const questionForms = questionsContainer.querySelectorAll('.question-form');
                if (questionForms.length === 0) {
                    alert('Veuillez ajouter au moins une question.');
                    return;
                }
                
                const questions = [];
                questionForms.forEach(form => {
                    const questionText = form.querySelector('.question-text-input').value;
                    const optionInputs = form.querySelectorAll('.option-input');
                    const correctAnswer = parseInt(form.querySelector('.correct-answer-select').value);
                    
                    if (!questionText) {
                        alert('Veuillez remplir toutes les questions.');
                        return;
                    }
                    
                    const options = Array.from(optionInputs).map(input => input.value);
                    if (options.some(opt => !opt)) {
                        alert('Veuillez remplir toutes les options pour chaque question.');
                        return;
                    }
                    
                    questions.push({
                        question: questionText,
                        options: options,
                        correctAnswer: correctAnswer
                    });
                });
                
                if (isEditingExam) {
                    // Mettre à jour l'examen existant
                    const examIndex = examsData.findIndex(e => e.id === editingExamId);
                    if (examIndex !== -1) {
                        examsData[examIndex].name = name;
                        examsData[examIndex].subject = subject;
                        examsData[examIndex].description = description;
                        examsData[examIndex].difficulty = difficulty;
                        examsData[examIndex].duration = duration;
                        examsData[examIndex].instructions = instructions;
                        examsData[examIndex].questions = questions;
                    }
                } else {
                    // Ajouter un nouvel examen
                    const newId = getNextExamId();
                    examsData.push({
                        id: newId,
                        name: name,
                        subject: subject,
                        difficulty: difficulty,
                        description: description,
                        duration: duration,
                        instructions: instructions,
                        questions: questions
                    });
                }
                
                saveExamsData();
                hideExamForm();
                refreshAdminData();
                renderExams();
                alert('Examen enregistré avec succès !');
            }
            
            function getNextExamId() {
                let maxId = 0;
                examsData.forEach(exam => {
                    if (exam.id > maxId) {
                        maxId = exam.id;
                    }
                });
                return maxId + 1;
            }
        });
    </script>
</body>
</html>